<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Andrey Akinshin&#39;s blog">
    <meta name="author" content="Andrey Akinshin">
    <link href="/img/favicon.ico?v=2" rel="icon" type="image/x-icon"/>
    <meta name="keywords" content=''>

    <title>Andrey Akinshin&#39;s blog</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">

    <!-- Custom styles -->
    <link href="/css/about.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/blog.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/highlight.css" rel="stylesheet" type="text/css" media="all">

    <!-- Bootstrap scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>

    <!-- Other stuff -->
    <link href="/en/rss.xml" type="application/rss+xml" rel="alternate" title="Blog RSS Feed" />
    <link href="/en/atom.xml" type="application/atom+xml" rel="alternate" title="Blog ATOM Feed" />

    <!-- Google analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41419012-5', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter28700916 = new Ya.Metrika({id:28700916,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true});
            } catch(e) { }
        });
        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";
        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
    </script>
    <!-- /Yandex.Metrika counter -->
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
       MathJax.Hub.Config({
        extensions: ["jsMath2jax.js"]
      });
    </script>
    <script
      src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
    </script>
    <!-- Disqus -->
    <script id="dsq-count-scr" src="//aakinshinnet-en.disqus.com/count.js" async></script>
  </head>

  <body>
     <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link" id="nav-link-blog" href="/en/blog/">Blog</a>
          <a class="nav-link" id="nav-link-blog-content" href="/en/blog/content/">Content</a>
          <a class="nav-link" id="nav-link-about" href="/en/about/">About author</a>
          <a class="nav-link" href='/ru/blog/'>Russian version</a>
        </nav>
      </div>
    </div>

    <div class="container">
      <div class="blog-main">
<div class="blog-post">
        <h2 class="blog-post-title"><a href='/en/blog/dev/perfect-code-and-real-projects/'>Perfect code and real projects</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> August 27, 2013.
          <b>Category:</b> <a href="/en/blog/content/#dev"><span class="tag tag-info">Development</span></a>
          <b>Tags:</b>
                <a href="/en/blog/tags/#PerfectCode"><span class="tag tag-pill tag-info">PerfectCode</span></a>
        </span><br /><br />
        <p>I’ve got a problem. I am a perfectionist. I like perfect code. This is not only the correct way to develop applications but also the real proficiency. I enjoy reading a good listing not less than reading a good book. Developing architecture of a big project is no simpler than designing architecture of a big building. In case the work is good the result is no less beautiful. I am sometimes fascinated by how elegantly the patterns are entwined in the perfect software system. I am delighted by the attention to details when every method is so simple and understandable that can be a classic sample of the perfect code.</p>
        <a href='/en/blog/dev/perfect-code-and-real-projects/'>Read more</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/en/blog/dev/perfect-code-and-real-projects/#disqus_thread">Comments</a><br /><br />
        <hr />
    </div>
<div class="blog-post">
        <h2 class="blog-post-title"><a href='/en/blog/dev/comments/'>To Add Comments or Not to Add?</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> August 27, 2013.
          <b>Category:</b> <a href="/en/blog/content/#dev"><span class="tag tag-info">Development</span></a>
          <b>Tags:</b>
                <a href="/en/blog/tags/#PerfectCode"><span class="tag tag-pill tag-info">PerfectCode</span></a>
        </span><br /><br />
        <p><em>A really good comment is the one you managed to avoid. (c) Uncle Bob</em></p>
<p>Lately, I’ve been feeling really tired of hot discussions on if it’s necessary to add comments in the code. As a rule, there are self-confident juniors with the indisputable statement as: “Why not to comment it, it will be unreadable without the comments!” on one side. And experienced seniors are on the other side. They understand that if it’s possible to go without the comments than “You better, damn it, do it in this way!” Probably, many developers got comment cravings since they’ve been students when professors made them comment every code line, “to make the student better understand it”. Real projects shouldn’t contain a lot of comments that only spoil the code. I don’t agitate for avoiding comments at all, but if you managed to write the code that doesn’t need comments, you can consider it your small victory. I would like to refer you to some good books that helped form my position. I like and respect these authors and completely share their opinion.</p>
<ul>
<li><a href="http://www.amazon.com/Code-Complete-Practical-Handbook-Construction/dp/0735619670">Steven C. McConnell, Code Complete</a></li>
<li><a href="http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882">Robert Martin, Clean Code: A Handbook of Agile Software Craftsmanship</a></li>
<li><a href="http://www.amazon.com/The-Readable-Code-Theory-Practice/dp/0596802293">Dustin Boswell, Trevor Foucher, The Art of Readable Code (Theory in Practice)</a></li>
</ul>
</p>
        <a href='/en/blog/dev/comments/'>Read more</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/en/blog/dev/comments/#disqus_thread">Comments</a><br /><br />
        <hr />
    </div>
<div class="blog-post">
        <h2 class="blog-post-title"><a href='/en/blog/dotnet/gc-native/'>Unexpected area to collect garbage in .NET</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> August 08, 2013.
          <b>Category:</b> <a href="/en/blog/content/#dotnet"><span class="tag tag-info">.NET</span></a>
          <b>Tags:</b>
                <a href="/en/blog/tags/#.NET"><span class="tag tag-pill tag-info">.NET</span></a>
                <a href="/en/blog/tags/#GC"><span class="tag tag-pill tag-info">GC</span></a>
                <a href="/en/blog/tags/#OpenCV"><span class="tag tag-pill tag-info">OpenCV</span></a>
        </span><br /><br />
        <p>The .NET framework provides an intelligent garbage collector that saves us a trouble of manual memory management. And in 95% of cases you can forget about memory and related issues. But the remaining 5% have some specific aspects connected to unmanaged resources, too big objects, etc. And it’s better to know how the garbage is collected. Otherwise, you can get surprises.</p>
<p>Do you think GC is able to collect an object till its last method is complete? It appears it is. But it is necessary to run an application in release mode without debugging. In this case JIT compiler will perform optimizations that will make this situation possible. Of course, JIT compiler does it when the remaining method body doesn’t contain references to the object or its fields. It should seem a very harmless optimization. But it can lead to the problems if you work with the unmanaged resources: object compilation can be executed before the operation over the unmanaged resource is finished. And most likely it will result in the application crash. </p>
        <a href='/en/blog/dotnet/gc-native/'>Read more</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/en/blog/dotnet/gc-native/#disqus_thread">Comments</a><br /><br />
        <hr />
    </div>
<div class="blog-post">
        <h2 class="blog-post-title"><a href='/en/blog/dotnet/closures/'>Unobviousness in use of C# closures</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> August 07, 2013.
          <b>Category:</b> <a href="/en/blog/content/#dotnet"><span class="tag tag-info">.NET</span></a>
          <b>Tags:</b>
                <a href="/en/blog/tags/#Lambda"><span class="tag tag-pill tag-info">Lambda</span></a>
                <a href="/en/blog/tags/#Closures"><span class="tag tag-pill tag-info">Closures</span></a>
                <a href="/en/blog/tags/#C#"><span class="tag tag-pill tag-info">C#</span></a>
                <a href="/en/blog/tags/#.NET"><span class="tag tag-pill tag-info">.NET</span></a>
        </span><br /><br />
        <p>C# gives us an ability to use closures. This is a powerful tool that allows anonymous methods and lambda-functions to capture unbound variables in their lexical scope. And many programmers in .NET world like using closures very much, but only few of them understand how they really work. Let’s start with a simple sample:</p>
<pre><code class="language-cs">public void Run()
{
  int e = 1;
  Foo(x =&gt; x + e);
}
</code></pre>
<p>Nothing complicated happens here: we just captured a local variable <code>e</code> in its lambda that is passed to some <code>Foo</code> method. Let’s see how the compiler will expand such construction.*</p>
<pre><code class="language-cs">public void Run()
{
  DisplayClass c = new DisplayClass();
  c.e = 1;  
  Foo(c.Action);
}
private sealed class DisplayClass
{
  public int e;
  public int Action(int x)
  {
    return x + e;
  }
}
</code></pre>
</p>
        <a href='/en/blog/dotnet/closures/'>Read more</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/en/blog/dotnet/closures/#disqus_thread">Comments</a><br /><br />
        <hr />
    </div>
<div class="blog-post">
        <h2 class="blog-post-title"><a href='/en/blog/dotnet/wrap-cs-in-com/'>Wrapping C# class for use in COM</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> June 03, 2013.
          <b>Category:</b> <a href="/en/blog/content/#dotnet"><span class="tag tag-info">.NET</span></a>
          <b>Tags:</b>
                <a href="/en/blog/tags/#.NET"><span class="tag tag-pill tag-info">.NET</span></a>
                <a href="/en/blog/tags/#C#"><span class="tag tag-pill tag-info">C#</span></a>
                <a href="/en/blog/tags/#COM"><span class="tag tag-pill tag-info">COM</span></a>
        </span><br /><br />
        <p>Let us have a C# class that makes something useful, for example:</p>
<pre><code class="language-cs">public class Calculator
{
    public int Sum(int a, int b)
    {
        return a + b;
    }
}
</code></pre>
<p>Let’s create a <a href="http://ru.wikipedia.org/wiki/Component_Object_Model">COM</a> interface for this class to make it possible to use its functionality in other areas. At the end we will see how this class is used in Delphi environment.</p>
        <a href='/en/blog/dotnet/wrap-cs-in-com/'>Read more</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/en/blog/dotnet/wrap-cs-in-com/#disqus_thread">Comments</a><br /><br />
        <hr />
    </div>
</div>
<nav>
  <ul class="pagination">
      <li class="page-item">
        <a class="page-link" href='/en/blog/page/2/' aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
          <span class="sr-only">Previous</span>
        </a>
      </li>
                <li class="page-item"><a class="page-link" href="/en/blog/">1</a></li>
        <li class="page-item"><a class="page-link" href="/en/blog/page/2/">2</a></li>
        <li class="page-item active">
          <a class="page-link" href="/en/blog/page/3/">3 <span class="sr-only">(current)</span></a>
        </li>
              <li class="page-item disabled">
        <a class="page-link" href="#" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
          <span class="sr-only">Next</span>
        </a>
      </li>
  </ul>
</nav>
<hr />
<p style="font-size:150%"><a href="/ru/blog/">More posts in Russian</a></p>
<p>Subscribe: <a href="/en/rss.xml">RSS</a> <a href="/en/atom.xml">Atom</a></p>
    </div>

    <footer class="blog-footer">
      <div class="container">
        <p>&copy; 2014–2017 Andrey Akinshin</p>
      </div>
    </footer>

    <script>
    $(function() {
       // standard classes
       $("table").addClass("table");
       $("table").addClass("table-bordered");
       $("table").addClass("table-hover");
       $("table").addClass("table-condensed");
       $("blockquote").addClass("blockquote");

       // nav
       var url = $(location).attr('href');
       if (url.indexOf("/blog/content") != -1) {
           $("#nav-link-blog-content").addClass("active");
       } else if (url.indexOf("/blog") != -1) {
           $("#nav-link-blog").addClass("active");
       } else if (url.indexOf("/about") != -1) {
           $("#nav-link-about").addClass("active");
       }
    });
    </script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/anchor.min.js"></script>
    <script>
      anchors.options = {
        placement: 'left',
        icon: '§'
      };
      anchors.add('h1');
      anchors.add('h2');
      anchors.add('h3');
    </script>
  </body>
</html>
