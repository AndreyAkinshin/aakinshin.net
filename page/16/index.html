<!doctype html><html lang=en class=h-100><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.74.3"><meta name=author content="Andrey Akinshin"><link href=/img/favicon.ico rel=icon type=image/x-icon><meta name=keywords content><title>Andrey Akinshin's blog (Page 16)</title><meta name=description content="Andrey Akinshin's blog"><meta name=twitter:site content="@andrey_akinshin"><meta name=twitter:creator content="@andrey_akinshin"><link href=/css/lumen-bootstrap.min.css theme=light rel=stylesheet type=text/css media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link href=/css/slate-bootstrap.min.css theme=dark rel=stylesheet type=text/css media="(prefers-color-scheme: dark)"><link href=/css/syntax-light.css theme=light rel=stylesheet type=text/css media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link href=/css/syntax-dark.css theme=dark rel=stylesheet type=text/css media="(prefers-color-scheme: dark)"><script src=https://aakinshin.net/js/theme-before.min.26d61b7027fe55e642f0001cef94cb75b567d721086492aab6b4e32d9ee7811d.js></script><script type=module src=https://aakinshin.net/js/dark-mode-toggle.min.882998740b9c4c24677576b997bde5a487246e2e3bd72128a0e922eaa59db029.mjs></script><link href=https://aakinshin.net/css/fontawesome-all.min.50da8736f05b35aac9691de67fe993cbe01b7d88fcf0cb682c3a8f39933fe4a3.css rel=stylesheet type=text/css media=all><link href=https://aakinshin.net/css/about.min.2a76db7cc14055b3bafacc363f453917ab54a818a7db2a0a9b2409c0f6bf07c5.css rel=stylesheet type=text/css media=all><link href=https://aakinshin.net/css/blog.min.b7c11be17efd31d4852ff062694551596a7625c992103c0605c98f85d6569f11.css rel=stylesheet type=text/css media=all><link rel=alternate type=application/rss+xml href=https://aakinshin.net/posts/index.xml title="RSS Feed"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZVB6MXSX32"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-ZVB6MXSX32');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-41419012-5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-41419012-5');</script><script type=text/javascript>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");ym(28700916,"init",{clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src=https://mc.yandex.ru/watch/28700916 style=position:absolute;left:-9999px alt></div></noscript><script src=/js/jquery-3.3.1.slim.min.js></script></head><body><div class=bg-primary><div class="container bg-primary"><nav class="navbar navbar-expand-sm navbar-dark bg-primary"><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link id=nav-link-blog href=https://aakinshin.net/><i class="fas fa-home" title=Home style=color:#fff></i></a></li><li class=nav-item><a class=nav-link id=nav-link-posts href=https://aakinshin.net/posts/>Posts</a></li><li class=nav-item><a class=nav-link id=nav-link-about href=https://aakinshin.net/about/>About</a></li><li class=nav-item><a class=nav-link id=nav-link-pdnb href=https://aakinshin.net/prodotnetbenchmarking/>Pro .NET Benchmarking</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-toggle=dropdown href=# role=button aria-haspopup=true aria-expanded=false>EN</a><div class=dropdown-menu><a class=dropdown-item href=https://aakinshin.net/ru/>RU</a></div></li></ul><ul class="navbar-nav ml-auto"><li class=nav-item><dark-mode-toggle permanent=true></dark-mode-toggle></li></ul></nav></div></div><div class=container><main id=main><div class=blog-main><div class=blog-post><h2 class=blog-post-title><a href=/posts/msbuild-configurations/>Setting up build configuration in .NET</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=2014-02-08>February 8, 2014</time>
&nbsp;&nbsp;
<i class="fas fa-tag"></i>&nbsp;
<a href=https://aakinshin.net/tags/dotnet/ class="badge badge-info">.NET</a>
<a href=https://aakinshin.net/tags/msbuild/ class="badge badge-info">MSBuild</a>
<a href=https://aakinshin.net/tags/configurations/ class="badge badge-info">Configurations</a></span><br><br><p>You get two default build configurations: Debug and Release, when creating a new project in Visual Studio. And it’s enough for most small projects. But there can appear a necessity to extend it with the additional configurations. It’s ok if you need to add just a couple of new settings, but what if there are tens of such settings? And what if your solution contains 20 projects that need setting up of these configurations? In this case it becomes quite difficult to manage and modify build parameters.</p><p>In this article, we will review a way to make this process simpler by reducing description of the build configurations.</p><br><a href=/posts/msbuild-configurations/>Read more</a><br><br><hr></div><div class=blog-post><h2 class=blog-post-title><a href=/posts/jon-skeet-quiz/>Jon Skeet's Quiz</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=2013-11-03>November 3, 2013</time>
&nbsp;&nbsp;
<i class="fas fa-tag"></i>&nbsp;
<a href=https://aakinshin.net/tags/dotnet/ class="badge badge-info">.NET</a>
<a href=https://aakinshin.net/tags/cs/ class="badge badge-info">C#</a></span><br><br><p>Jon Skeet was once asked to give three questions to check how well you know C#. He asked the <a href=http://www.dotnetcurry.com/magazine/jon-skeet-quiz.aspx>following questions</a>:</p><ul><li><strong>Q1.</strong> <em>What constructor call can you write such that this prints True (at least on the Microsoft .NET implementation)?</em></li></ul><div class=highlight><pre class=chroma><code class=language-cs data-lang=cs><span class=kt>object</span> <span class=n>x</span> <span class=p>=</span> <span class=k>new</span> <span class=cm>/* fill in code here */</span><span class=p>;</span>
<span class=kt>object</span> <span class=n>y</span> <span class=p>=</span> <span class=k>new</span> <span class=cm>/* fill in code here */</span><span class=p>;</span>
<span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=n>x</span> <span class=p>==</span> <span class=n>y</span><span class=p>);</span>
</code></pre></div><p><em>Note that it’s just a constructor call, and you can’t change the type of the variables.</em></p><ul><li><strong>Q2.</strong> <em>How can you make this code compile such that it calls three different method overloads?</em></li></ul><div class=highlight><pre class=chroma><code class=language-cs data-lang=cs><span class=k>void</span> <span class=n>Foo</span><span class=p>()</span>
<span class=p>{</span>
    <span class=n>EvilMethod</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>&gt;();</span>
    <span class=n>EvilMethod</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>&gt;();</span>
    <span class=n>EvilMethod</span><span class=p>&lt;</span><span class=kt>int?</span><span class=p>&gt;();</span>
<span class=p>}</span>
</code></pre></div><ul><li><strong>Q3.</strong> <em>With a local variable (so no changing the variable value cunningly), how can you make this code fail on the second line?</em></li></ul><div class=highlight><pre class=chroma><code class=language-cs data-lang=cs><span class=kt>string</span> <span class=n>text</span> <span class=p>=</span> <span class=n>x</span><span class=p>.</span><span class=n>ToString</span><span class=p>();</span> <span class=c1>// No exception
</span><span class=c1></span><span class=n>Type</span> <span class=n>type</span> <span class=p>=</span> <span class=n>x</span><span class=p>.</span><span class=n>GetType</span><span class=p>();</span> <span class=c1>// Bang!
</span></code></pre></div><p>These questions seemed interesting to me, that is why I decided to discuss the solutions.</p><br><a href=/posts/jon-skeet-quiz/>Read more</a><br><br><hr></div><div class=blog-post><h2 class=blog-post-title><a href=/posts/perfect-code-and-real-projects/>Perfect code and real projects</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=2013-08-28>August 28, 2013</time>
&nbsp;&nbsp;
<i class="fas fa-tag"></i>&nbsp;
<a href=https://aakinshin.net/tags/perfectcode/ class="badge badge-info">PerfectCode</a></span><br><br>I’ve got a problem. I am a perfectionist. I like perfect code. This is not only the correct way to develop applications but also the real proficiency. I enjoy reading a good listing not less than reading a good book. Developing architecture of a big project is no simpler than designing architecture of a big building. In case the work is good the result is no less beautiful. I am sometimes fascinated by how elegantly the patterns are entwined in the perfect software system. I am delighted by the attention to details when every method is so simple and understandable that can be a classic sample of the perfect code.
But, unfortunately, this splendor is ruined by stern reality and real projects. If we talk about production project, users don’t care how beautiful your code is and how wonderful your architecture is, they care to have a properly working project. But I still think that in any case you need to strive for writing good code, but without getting stuck on this idea. After reading various holy-war discussions related to correct approaches to writing code I noticed a trend: everyone tries to apply the mentioned approaches not to programming in general, but to personal development experience, to their own projects. Many developers don’t understand that good practice is not an absolute rule that should be followed in 100% of scenarios. It’s just an advice on what to do in most cases. You can get a dozen of scenarios where the practice won’t work at all. But it doesn’t mean that the approach is not that good, it’s just used in the wrong environment.
There is another problem: some developers are not that good as they think. I often see the following situation: such developer got some idea (without getting deep into details) in the big article about the perfect code and he started to use it everywhere and the developer’s code became even worse.<br><a href=/posts/perfect-code-and-real-projects/>Read more</a><br><br><hr></div><div class=blog-post><h2 class=blog-post-title><a href=/posts/comments/>To Add Comments or Not to Add?</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=2013-08-28>August 28, 2013</time>
&nbsp;&nbsp;
<i class="fas fa-tag"></i>&nbsp;
<a href=https://aakinshin.net/tags/perfectcode/ class="badge badge-info">PerfectCode</a></span><br><br><p><em>A really good comment is the one you managed to avoid. (c) Uncle Bob</em></p><p>Lately, I’ve been feeling really tired of hot discussions on if it’s necessary to add comments in the code. As a rule, there are self-confident juniors with the indisputable statement as: “Why not to comment it, it will be unreadable without the comments!” on one side. And experienced seniors are on the other side. They understand that if it’s possible to go without the comments than “You better, damn it, do it in this way!” Probably, many developers got comment cravings since they’ve been students when professors made them comment every code line, “to make the student better understand it”. Real projects shouldn’t contain a lot of comments that only spoil the code. I don’t agitate for avoiding comments at all, but if you managed to write the code that doesn’t need comments, you can consider it your small victory. I would like to refer you to some good books that helped form my position. I like and respect these authors and completely share their opinion.</p><ul><li><a href=http://www.amazon.com/Code-Complete-Practical-Handbook-Construction/dp/0735619670>Steven C. McConnell, Code Complete</a></li><li><a href=http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882>Robert Martin, Clean Code: A Handbook of Agile Software Craftsmanship</a></li><li><a href=http://www.amazon.com/The-Readable-Code-Theory-Practice/dp/0596802293>Dustin Boswell, Trevor Foucher, The Art of Readable Code (Theory in Practice)</a></li></ul><br><a href=/posts/comments/>Read more</a><br><br><hr></div><div class=blog-post><h2 class=blog-post-title><a href=/posts/gc-native/>Unexpected area to collect garbage in .NET</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=2013-08-08>August 8, 2013</time>
&nbsp;&nbsp;
<i class="fas fa-tag"></i>&nbsp;
<a href=https://aakinshin.net/tags/dotnet/ class="badge badge-info">.NET</a>
<a href=https://aakinshin.net/tags/gc/ class="badge badge-info">GC</a>
<a href=https://aakinshin.net/tags/opencv/ class="badge badge-info">OpenCV</a></span><br><br><p>The .NET framework provides an intelligent garbage collector that saves us a trouble of manual memory management. And in 95% of cases you can forget about memory and related issues. But the remaining 5% have some specific aspects connected to unmanaged resources, too big objects, etc. And it’s better to know how the garbage is collected. Otherwise, you can get surprises.</p><p>Do you think GC is able to collect an object till its last method is complete? It appears it is. But it is necessary to run an application in release mode without debugging. In this case JIT compiler will perform optimizations that will make this situation possible. Of course, JIT compiler does it when the remaining method body doesn’t contain references to the object or its fields. It should seem a very harmless optimization. But it can lead to the problems if you work with the unmanaged resources: object compilation can be executed before the operation over the unmanaged resource is finished. And most likely it will result in the application crash.</p><br><a href=/posts/gc-native/>Read more</a><br><br><hr></div><div class=blog-post><h2 class=blog-post-title><a href=/posts/closures/>Unobviousness in use of C# closures</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=2013-08-07>August 7, 2013</time>
&nbsp;&nbsp;
<i class="fas fa-tag"></i>&nbsp;
<a href=https://aakinshin.net/tags/lambda/ class="badge badge-info">Lambda</a>
<a href=https://aakinshin.net/tags/closures/ class="badge badge-info">Closures</a>
<a href=https://aakinshin.net/tags/cs/ class="badge badge-info">C#</a>
<a href=https://aakinshin.net/tags/dotnet/ class="badge badge-info">.NET</a></span><br><br><p>C# gives us an ability to use closures. This is a powerful tool that allows anonymous methods and lambda-functions to capture unbound variables in their lexical scope. And many programmers in .NET world like using closures very much, but only few of them understand how they really work. Let’s start with a simple sample:</p><div class=highlight><pre class=chroma><code class=language-cs data-lang=cs><span class=k>public</span> <span class=k>void</span> <span class=n>Run</span><span class=p>()</span>
<span class=p>{</span>
  <span class=kt>int</span> <span class=n>e</span> <span class=p>=</span> <span class=m>1</span><span class=p>;</span>
  <span class=n>Foo</span><span class=p>(</span><span class=n>x</span> <span class=p>=&gt;</span> <span class=n>x</span> <span class=p>+</span> <span class=n>e</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div><p>Nothing complicated happens here: we just captured a local variable <code>e</code> in its lambda that is passed to some <code>Foo</code> method. Let’s see how the compiler will expand such construction.*</p><div class=highlight><pre class=chroma><code class=language-cs data-lang=cs><span class=k>public</span> <span class=k>void</span> <span class=n>Run</span><span class=p>()</span>
<span class=p>{</span>
  <span class=n>DisplayClass</span> <span class=n>c</span> <span class=p>=</span> <span class=k>new</span> <span class=n>DisplayClass</span><span class=p>();</span>
  <span class=n>c</span><span class=p>.</span><span class=n>e</span> <span class=p>=</span> <span class=m>1</span><span class=p>;</span>  
  <span class=n>Foo</span><span class=p>(</span><span class=n>c</span><span class=p>.</span><span class=n>Action</span><span class=p>);</span>
<span class=p>}</span>
<span class=k>private</span> <span class=k>sealed</span> <span class=k>class</span> <span class=nc>DisplayClass</span>
<span class=p>{</span>
  <span class=k>public</span> <span class=kt>int</span> <span class=n>e</span><span class=p>;</span>
  <span class=k>public</span> <span class=kt>int</span> <span class=n>Action</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>)</span>
  <span class=p>{</span>
    <span class=k>return</span> <span class=n>x</span> <span class=p>+</span> <span class=n>e</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><br><a href=/posts/closures/>Read more</a><br><br><hr></div><div class=blog-post><h2 class=blog-post-title><a href=/posts/wrap-cs-in-com/>Wrapping C# class for use in COM</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=2013-06-03>June 3, 2013</time>
&nbsp;&nbsp;
<i class="fas fa-tag"></i>&nbsp;
<a href=https://aakinshin.net/tags/dotnet/ class="badge badge-info">.NET</a>
<a href=https://aakinshin.net/tags/cs/ class="badge badge-info">C#</a>
<a href=https://aakinshin.net/tags/com/ class="badge badge-info">COM</a></span><br><br><p>Let us have a C# class that makes something useful, for example:</p><div class=highlight><pre class=chroma><code class=language-cs data-lang=cs><span class=k>public</span> <span class=k>class</span> <span class=nc>Calculator</span>
<span class=p>{</span>
    <span class=k>public</span> <span class=kt>int</span> <span class=n>Sum</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=k>return</span> <span class=n>a</span> <span class=p>+</span> <span class=n>b</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Let’s create a <a href=http://ru.wikipedia.org/wiki/Component_Object_Model>COM</a> interface for this class to make it possible to use its functionality in other areas. At the end we will see how this class is used in Delphi environment.</p><br><a href=/posts/wrap-cs-in-com/>Read more</a><br><br><hr></div><div class=blog-post><h2 class=blog-post-title><a href=/about/>About</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=0001-01-01>January 1, 0001</time>
&nbsp;&nbsp;</span><br><br>Andrey Akinshin is a software developer, an author of blog posts and papers about mathematics and programming, a frequent conference speaker (100+ public talks). He is the project lead of BenchmarkDotNet (the most popular .NET library for benchmarking) and perfolizer (performance analysis toolkit); the author of Pro .NET Benchmarking (a book about good practices of performance measurements).
Currently, Andrey is a mathematician at Huawei Research. He is also a former performance lead in JetBrains Rider (a cross-platform .NET IDE based on the IntelliJ platform and ReSharper), the program director of the DotNext conference, an ex Microsoft .NET MVP, a silver medalist of ACM ICPC.
Andrey is a Ph.D. in computer science and mathematics. His current primary research area is mathematical statistics. Andrey is involved in a research project at the Sobolev Institute of Mathematics SB RAS related to mathematical biology and bifurcation theory. Previously, he worked as a postdoctoral research fellow at the Weizmann Institute of Science.<br><a href=/about/>Read more</a><br><br><hr></div><div class=blog-post><h2 class=blog-post-title><a href=/posts-bib/>Blog posts BibTeX references</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=0001-01-01>January 1, 0001</time>
&nbsp;&nbsp;</span><br><br><br><a href=/posts-bib/>Read more</a><br><br><hr></div><div class=blog-post><h2 class=blog-post-title><a href=/partners/>Information partners</a></h2><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=0001-01-01>January 1, 0001</time>
&nbsp;&nbsp;</span><br><br>Jooble is a search engine specializes in job search. The company is represented in 71 countries. The search is conducted among all job portals in the country. Jooble automatically filters out duplicates, so the same job posted on different job sites will be shown as one.<br><a href=/partners/>Read more</a><br><br><hr></div></div><div class=paginator><ul class=pagination><li class=page-item><a href=/ class=page-link aria-label=First><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/page/15/ class=page-link aria-label=Previous><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a class=page-link href=/>1</a></li><li class=page-item><a class=page-link href=/page/2/>2</a></li><li class=page-item><a class=page-link href=/page/3/>3</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/15/>15</a></li><li class="page-item active"><a class=page-link href=/page/16/>16</a></li><li class=page-item><a class=page-link href=/page/17/>17</a></li><li class=page-item><a href=/page/17/ class=page-link aria-label=Next><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/page/17/ class=page-link aria-label=Last><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></main></div><footer class=blog-footer><div class=container><p>&copy; 2013&mdash;2022 Andrey Akinshin
|
<a href=https://github.com/AndreyAkinshin><i class="fab fa-github" title=GitHub></i></a><a href=https://twitter.com/andrey_akinshin><i class="fab fa-twitter" title=Twitter></i></a><a href=https://aakinshin.net/posts/index.xml><i class="fas fa-rss" title=RSS></i></a>|
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a></p></div></footer><script src=https://aakinshin.net/js/theme-after.min.082780cb948cc57eabbc0d80172a7a5347d5572b599938b4c9876dfd7978b424.js></script><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/anchor.min.js></script><script src=https://aakinshin.net/js/custom.min.11932490dde776463ed165b345838c701accc0cfdedf2e0868f13415f41f0872.js></script><script>window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true,},options:{skipHtmlTags:['script','noscript','style','textarea','pre'],ignoreHtmlClass:'tex2jax_ignore',processHtmlClass:'tex2jax_process'}};</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></body></html>