<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="Andrey Akinshin&#39;s blog">
    <meta name="author" content="Andrey Akinshin">
    <link href="/img/favicon.ico" rel="icon" type="image/x-icon"/>
    <meta name="keywords" content=''>

    <title>Andrey Akinshin&#39;s blog</title>

    <!-- Bootstrap CSS & Highlight.js-->
    <link href="/css/lumen-bootstrap.min.css" theme="light" rel="stylesheet" type="text/css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
    <link href="/css/slate-bootstrap.min.css" theme="dark" rel="stylesheet" type="text/css" media="(prefers-color-scheme: dark)">
    <link href="/css/github-highlight.css" theme="light" rel="stylesheet" type="text/css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
    <link href="/css/darcula-highlight.css" theme="dark" rel="stylesheet" type="text/css" media="(prefers-color-scheme: dark)">
    <script src="/js/theme-before.js"></script>

    <!-- DarkModeToggle -->
    <script type="module" src="https://googlechromelabs.github.io/dark-mode-toggle/src/dark-mode-toggle.mjs"></script>

    <!-- FontAwesome -->
    <link href="/css/fontawesome-all.min.css" rel="stylesheet" type="text/css" media="all">
    
    <!-- Custom styles -->
    <link href="/css/about.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/blog.css" rel="stylesheet" type="text/css" media="all">

    <!-- Feeds -->
    <link href="/en/rss.xml" type="application/rss+xml" rel="alternate" title="Blog RSS Feed" />
    <link href="/en/atom.xml" type="application/atom+xml" rel="alternate" title="Blog ATOM Feed" />

    <!-- Google analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41419012-5', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter28700916 = new Ya.Metrika({
                        id:28700916,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor:true,
                        trackHash:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/28700916" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

    <!-- jQuery -->
    <script src="/js/jquery-3.3.1.slim.min.js"></script>
  </head>

  <body>
    <div class="bg-primary">
      <div class="container bg-primary">
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" id="nav-link-blog" href="/posts/">Posts</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="nav-link-blog-content" href="/content/">Content</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="nav-link-about" href="/about/">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="nav-link-about" href="/prodotnetbenchmarking/">Pro .NET Benchmarking</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">En</a>
              <div class="dropdown-menu">
                  <a class="dropdown-item" href='/ru/posts/'>Ru</a>
              </div>
            </li>
            <li class="nav-item"></li>
              <dark-mode-toggle permanent="true"></dark-mode-toggle>
            </li>
          </ul>
          <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" href="https://github.com/AndreyAkinshin"><i class="fab fa-github" title="GitHub" style="color:white"></i></a></li>
            <li class="nav-item"><a class="nav-link" href="https://twitter.com/andrey_akinshin"><i class="fab fa-twitter" title="Twitter" style="color:white"></i></a></li>
            <li class="nav-item"><a class="nav-link" href="/rss.xml"><i class="fas fa-rss" title="RSS" style="color:white"></i></a></li>
          </ul>
        </nav>
      </div>
    </div>

    <div class="container">
      <div class="blog-main">
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/nonparametric-effect-size/'>Nonparametric Cohen&#39;s d-consistent effect size</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> June 25, 2020.
          <b>Tags:</b>
                <a href="/tags/statistics"><span class="badge badge-pill badge-info">Statistics</span></a>
                <a href="/tags/effect-size"><span class="badge badge-pill badge-info">Effect size</span></a>
                <a href="/tags/mad"><span class="badge badge-pill badge-info">MAD</span></a>
                <a href="/tags/harrell-davis"><span class="badge badge-pill badge-info">Harrell-Davis</span></a>
                <a href="/tags/r"><span class="badge badge-pill badge-info">R</span></a>
                <a href="/tags/perfolizer"><span class="badge badge-pill badge-info">Perfolizer</span></a>
        </span><br /><br />
        <p>The effect size is a common way to describe a difference between two distributions.
When these distributions are normal, one of the most popular approaches to express the effect size is <a href="https://en.wikipedia.org/wiki/Effect_size#Cohen%27s_d">Cohen's d</a>.
Unfortunately, it doesn't work great for non-normal distributions.</p>
<p>In this post, I will show a robust Cohen's d-consistent effect size formula for nonparametric distributions.</p>
<div class="mx-auto"><a href="/img/posts/nonparametric-effect-size/blackboard.png" target="_blank"><img class="mx-auto d-block img-fluid" width="800" src="/img/posts/nonparametric-effect-size/blackboard.png" /></a></div>
</p>
        <a href='/posts/nonparametric-effect-size/'>Read more</a><br /><br />
        <hr />
    </div>
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/harrell-davis-double-mad-outlier-detector/'>Yet another robust outlier detector</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> June 22, 2020.
          <b>Tags:</b>
                <a href="/tags/statistics"><span class="badge badge-pill badge-info">Statistics</span></a>
                <a href="/tags/outliers"><span class="badge badge-pill badge-info">Outliers</span></a>
                <a href="/tags/mad"><span class="badge badge-pill badge-info">MAD</span></a>
                <a href="/tags/harrell-davis"><span class="badge badge-pill badge-info">Harrell-Davis</span></a>
                <a href="/tags/r"><span class="badge badge-pill badge-info">R</span></a>
                <a href="/tags/perfolizer"><span class="badge badge-pill badge-info">Perfolizer</span></a>
        </span><br /><br />
        <p>Outlier detection is an important step in data processing.
Unfortunately, if the distribution is not normal (e.g., right-skewed and heavy-tailed), it's hard to choose
a robust outlier detection algorithm that will not be affected by tricky distribution properties.
During the last several years, I tried many different approaches, but I was not satisfied with their results.
Finally, I found an algorithm to which I have (almost) no complaints.
It's based on the <em>double median absolute deviation</em> and the <em>Harrell-Davis quantile estimator</em>.
In this post, I will show how it works and why it's better than some other approaches.</p>
</p>
        <a href='/posts/harrell-davis-double-mad-outlier-detector/'>Read more</a><br /><br />
        <hr />
    </div>
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/how-listseparator-depends-on-runtime-and-operating-system/'>How ListSeparator Depends on Runtime and Operating System</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> May 20, 2020.
          <b>Tags:</b>
                <a href="/tags/dotnet"><span class="badge badge-pill badge-info">.NET</span></a>
                <a href="/tags/csharp"><span class="badge badge-pill badge-info">C#</span></a>
                <a href="/tags/rider"><span class="badge badge-pill badge-info">Rider</span></a>
                <a href="/tags/mono"><span class="badge badge-pill badge-info">Mono</span></a>
                <a href="/tags/net-core"><span class="badge badge-pill badge-info">.NET Core</span></a>
        </span><br /><br />
        <p><em>This blog post was <a href="https://blog.jetbrains.com/dotnet/2020/05/20/listseparator-depends-runtime-operating-system/">originally posted</a> on <a href="https://blog.jetbrains.com/dotnet/">JetBrains .NET blog</a>.</em></p>
<p>In the two previous blog posts from this series, we discussed how socket errors and socket orders depend on the runtime and operating systems. For some, it may be obvious that some things are indeed specific to the operating system or the runtime, but often these issues come as a surprise and are only discovered when running our code on different systems.
An interesting example that may bite us at runtime is using <code>ListSeparator</code> in our code. It should give us a common separator for list elements in a string. But is it really common?
Let's start our investigation by printing <code>ListSeparator</code> for the Russian language:</p>
<pre><code class="language-cs">Console.WriteLine(new CultureInfo(&quot;ru-ru&quot;).TextInfo.ListSeparator);
</code></pre>
<p>On Windows, you will get the same result for .NET Framework, .NET Core, and Mono: the <code>ListSeparator</code> is <code>;</code> (a semicolon). You will also get a semicolon on Mono+Unix. However, on .NET Core+Unix, you will get a <a href="https://en.wikipedia.org/wiki/Non-breaking_space">non-breaking space</a>.</p>
</p>
        <a href='/posts/how-listseparator-depends-on-runtime-and-operating-system/'>Read more</a><br /><br />
        <hr />
    </div>
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/how-sorting-order-depends-on-runtime-and-operating-system/'>How Sorting Order Depends on Runtime and Operating System</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> May 13, 2020.
          <b>Tags:</b>
                <a href="/tags/dotnet"><span class="badge badge-pill badge-info">.NET</span></a>
                <a href="/tags/csharp"><span class="badge badge-pill badge-info">C#</span></a>
                <a href="/tags/rider"><span class="badge badge-pill badge-info">Rider</span></a>
                <a href="/tags/mono"><span class="badge badge-pill badge-info">Mono</span></a>
                <a href="/tags/net-core"><span class="badge badge-pill badge-info">.NET Core</span></a>
        </span><br /><br />
        <p><em>This blog post was <a href="https://blog.jetbrains.com/dotnet/2020/05/13/sorting-order-depends-runtime-operating-system/">originally posted</a> on <a href="https://blog.jetbrains.com/dotnet/">JetBrains .NET blog</a>.</em></p>
<p>In <a href="https://www.jetbrains.com/rider/">Rider</a>, we have unit tests that enumerate files in your project and dump a sorted list of these files. In one of our test projects, we had the following files: <code>jquery-1.4.1.js</code>, <code>jquery-1.4.1.min.js</code>, <code>jquery-1.4.1-vsdoc.js</code>. On Windows, .NET Framework, .NET Core, and Mono produce the same sorted list:</p>
<pre><code class="language-bash">jquery-1.4.1.js
jquery-1.4.1.min.js
jquery-1.4.1-vsdoc.js
</code></pre>
</p>
        <a href='/posts/how-sorting-order-depends-on-runtime-and-operating-system/'>Read more</a><br /><br />
        <hr />
    </div>
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/how-socket-error-codes-depend-on-runtime-and-operating-system/'>How Socket Error Codes Depend on Runtime and Operating System</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> April 27, 2020.
          <b>Tags:</b>
                <a href="/tags/dotnet"><span class="badge badge-pill badge-info">.NET</span></a>
                <a href="/tags/csharp"><span class="badge badge-pill badge-info">C#</span></a>
                <a href="/tags/rider"><span class="badge badge-pill badge-info">Rider</span></a>
                <a href="/tags/mono"><span class="badge badge-pill badge-info">Mono</span></a>
                <a href="/tags/net-core"><span class="badge badge-pill badge-info">.NET Core</span></a>
        </span><br /><br />
        <p><em>This blog post was <a href="https://blog.jetbrains.com/dotnet/2020/04/27/socket-error-codes-depend-runtime-operating-system/">originally posted</a> on <a href="https://blog.jetbrains.com/dotnet/">JetBrains .NET blog</a>.</em></p>
<p><a href="https://www.jetbrains.com/rider/">Rider</a> consists of several processes that send messages to each other via sockets. To ensure the reliability of the whole application, it's important to properly handle all the socket errors. In our codebase, we had the following code which was adopted from <a href="https://github.com/mono/debugger-libs/blob/master/Mono.Debugging.Soft/SoftDebuggerSession.cs#L273">Mono Debugger Libs</a> and helps us communicate with debugger processes:</p>
<pre><code class="language-cs">protected virtual bool ShouldRetryConnection (Exception ex, int attemptNumber)
{
    var sx = ex as SocketException;
    if (sx != null) {
        if (sx.ErrorCode == 10061) //connection refused
            return true;
    }
    return false;
}
</code></pre>
<p>In the case of a failed connection because of a “ConnectionRefused” error, we are retrying the connection attempt. It works fine with .NET Framework and Mono. However, once we migrated to .NET Core, this method no longer correctly detects the &quot;connection refused&quot; situation on Linux and macOS. If we open the <code>SocketException</code> <a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.socketexception?view=netframework-4.8">documentation</a>, we will learn that this class has three different properties with error codes:</p>
<ul>
	<li><code>SocketError SocketErrorCode</code>: Gets the error code that is associated with this exception.</li>
	<li><code>int ErrorCode</code>: Gets the error code that is associated with this exception.</li>
	<li><code>int NativeErrorCode</code>: Gets the Win32 error code associated with this exception.</li>
</ul>
What's the difference between these properties? Should we expect different values on different runtimes or different operating systems? Which one should we use in production? Why do we have problems with <code>ShouldRetryConnection</code> on .NET Core? Let's figure it all out!
</p>
        <a href='/posts/how-socket-error-codes-depend-on-runtime-and-operating-system/'>Read more</a><br /><br />
        <hr />
    </div>
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/netcore-performance-revolution-in-rider-2020-1/'>.NET Core performance revolution in Rider 2020.1</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> April 14, 2020.
          <b>Tags:</b>
                <a href="/tags/dotnet"><span class="badge badge-pill badge-info">.NET</span></a>
                <a href="/tags/csharp"><span class="badge badge-pill badge-info">C#</span></a>
                <a href="/tags/rider"><span class="badge badge-pill badge-info">Rider</span></a>
                <a href="/tags/performance"><span class="badge badge-pill badge-info">Performance</span></a>
                <a href="/tags/net-core"><span class="badge badge-pill badge-info">.NET Core</span></a>
        </span><br /><br />
        <p><em>This blog post was <a href="https://blog.jetbrains.com/dotnet/2020/04/14/net-core-performance-revolution-rider-2020-1/">originally posted</a> on <a href="https://blog.jetbrains.com/dotnet/">JetBrains .NET blog</a>.</em></p>
<p>Many <a href="https://www.jetbrains.com/rider/">Rider</a> users may know that <a href="https://www.codemag.com/Article/1811091/Building-a-.NET-IDE-with-JetBrains-Rider">the IDE has two main processes</a>: frontend (Java-application based on the IntelliJ platform) and backend (.NET-application based on ReSharper). Since the first release of Rider, we’ve used Mono as the backend runtime on Linux and macOS. A few years ago, we decided to migrate to .NET Core. After resolving hundreds of technical challenges, <strong>we are finally ready to present the .NET Core edition of Rider!</strong></p>
<p>In this blog post, we want to share the results of some benchmarks that compare the Mono-powered and the .NET Core-powered editions of Rider. You may find this interesting if you are also thinking about migrating to .NET Core, or if you just want a high-level overview of the improvements to Rider in terms of performance and footprint, following the migration. (Spoiler: they’re huge!)</p>
</p>
        <a href='/posts/netcore-performance-revolution-in-rider-2020-1/'>Read more</a><br /><br />
        <hr />
    </div>
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/introducing-perfolizer/'>Introducing perfolizer</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> March 04, 2020.
          <b>Tags:</b>
                <a href="/tags/performance"><span class="badge badge-pill badge-info">performance</span></a>
        </span><br /><br />
        <p>Over the last 7 years, I've been maintaining <a href="https://github.com/dotnet/BenchmarkDotNet">BenchmarkDotNet</a>;
it's a library that helps you to transform methods into benchmarks, track their performance, and share reproducible measurement experiments.
Today, BenchmarkDotNet became the most popular .NET library for benchmarking which was adopted by <a href="https://github.com/dotnet/BenchmarkDotNet#who-use-benchmarkdotnet">3500+</a> projects including .NET Core.</p>
<p>While it has tons of features for benchmarking that allows getting reliable and accurate measurements,
it has a limited set of features for performance analysis.
And it's a problem for many developers.
Lately, I started to get a lot of emails when people ask me
&quot;OK, I benchmarked my application and got tons of numbers. What should I do next?&quot;
It's an excellent question that requires special tools.
So, I decided to start another project that focuses specifically on performance analysis.</p>
<p>Meet <a href="https://github.com/AndreyAkinshin/perfolizer">perfolizer</a> — a toolkit for performance analysis!
The source code is available on <a href="https://github.com/AndreyAkinshin/perfolizer">GitHub</a> under the MIT license.</p>
<div class="mx-auto"><a href="/img/posts/introducing-perfolizer/perfolizer.svg" target="_blank"><img class="mx-auto d-block img-fluid" width="800" src="/img/posts/introducing-perfolizer/perfolizer.svg" /></a></div>
</p>
        <a href='/posts/introducing-perfolizer/'>Read more</a><br /><br />
        <hr />
    </div>
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/shift-and-ratio-functions/'>Distribution comparison via the shift and ratio functions</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> October 11, 2019.
          <b>Tags:</b>
                <a href="/tags/statistics"><span class="badge badge-pill badge-info">Statistics</span></a>
        </span><br /><br />
        <p>When we compare two distributions, it's not always enough to detect a statistically significant difference between them.
In many cases, we also want to evaluate the magnitude of this difference.
Let's look at the following image:</p>
<div class="mx-auto">
<a href="/img/posts/shift-and-ratio-functions/compare1-light.png" target="_blank">
<picture>
<source theme='dark' srcset="/img/posts/shift-and-ratio-functions/compare1-dark.png" media="(prefers-color-scheme: dark)">
<source theme='light' srcset="/img/posts/shift-and-ratio-functions/compare1-light.png" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<img class="mx-auto d-block img-fluid" width="800" src="/img/posts/shift-and-ratio-functions/compare1-light.png">
</picture>
</a>
</div>
<p>On the left side, we can see a timeline plot with 2000 points
(at the middle of this plot, the distribution was significantly changed).
On the right side, you can see density plots for the left and the right side of
the timeline plot (before and after the change).
It's a pretty simple case, the difference between distributions be expressed via the
difference between mean values.</p>
<p>Now let's look at a more tricky case:</p>
<div class="mx-auto">
<a href="/img/posts/shift-and-ratio-functions/compare2-light.png" target="_blank">
<picture>
<source theme='dark' srcset="/img/posts/shift-and-ratio-functions/compare2-dark.png" media="(prefers-color-scheme: dark)">
<source theme='light' srcset="/img/posts/shift-and-ratio-functions/compare2-light.png" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<img class="mx-auto d-block img-fluid" width="800" src="/img/posts/shift-and-ratio-functions/compare2-light.png">
</picture>
</a>
</div>
<p>Here we have a bimodal distribution; after the change, the left mode &quot;moved right.&quot;
Now it's much harder to evaluate the difference between distributions
because the mean and the median values almost not changed:
the right mode has the biggest impact on these metrics than the left more.</p>
<p>And here is a much more tricky case:</p>
<div class="mx-auto">
<a href="/img/posts/shift-and-ratio-functions/compare3-light.png" target="_blank">
<picture>
<source theme='dark' srcset="/img/posts/shift-and-ratio-functions/compare3-dark.png" media="(prefers-color-scheme: dark)">
<source theme='light' srcset="/img/posts/shift-and-ratio-functions/compare3-light.png" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<img class="mx-auto d-block img-fluid" width="800" src="/img/posts/shift-and-ratio-functions/compare3-light.png">
</picture>
</a>
</div>
<p>Here we also have a bimodal distribution; after the change, both modes moved:
the left mode &quot;moved right&quot; and the right mode &quot;moved left.&quot;
How should we describe the difference between these distributions now?</p>
</p>
        <a href='/posts/shift-and-ratio-functions/'>Read more</a><br /><br />
        <hr />
    </div>
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/normality/'>Normality is a myth</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> October 09, 2019.
          <b>Tags:</b>
                <a href="/tags/statistics"><span class="badge badge-pill badge-info">Statistics</span></a>
                <a href="/tags/normality"><span class="badge badge-pill badge-info">Normality</span></a>
                <a href="/tags/central-limit-theorem"><span class="badge badge-pill badge-info">Central Limit Theorem</span></a>
                <a href="/tags/performance"><span class="badge badge-pill badge-info">Performance</span></a>
                <a href="/tags/r"><span class="badge badge-pill badge-info">R</span></a>
        </span><br /><br />
        <p>In many statistical papers, you can find the following phrase: &quot;assuming that we have a normal distribution.&quot;
Probably, you saw plots of the normal distribution density function in some statistics textbooks,
it looks like this:</p>
<div class="mx-auto">
<a href="/img/posts/normality/normal-light.png" target="_blank">
<picture>
<source theme='dark' srcset="/img/posts/normality/normal-dark.png" media="(prefers-color-scheme: dark)">
<source theme='light' srcset="/img/posts/normality/normal-light.png" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<img class="mx-auto d-block img-fluid" width="800" src="/img/posts/normality/normal-light.png">
</picture>
</a>
</div>
<p>The normal distribution is a pretty user-friendly mental model when we are trying to interpret the statistical metrics
like mean and standard deviation.
However, it may also be an insidious and misleading model when your distribution is not normal.
There is a great sentence in the <a href="https://doi.org/10.1093/biomet/34.3-4.209">&quot;Testing for normality&quot;</a> paper by R.C. Geary, 1947 (the quote was found <a href="https://garstats.wordpress.com/2019/06/17/myth/">here</a>):</p>
<blockquote>
<p>Normality is a myth; there never was, and never will be, a normal distribution.</p>
</blockquote>
<p>I 100% agree with this statement.
At least, if you are working with performance distributions
(that are based on the multiple iterations of your benchmarks that measure the performance metrics of your applications),
you should forget about normality.
That's how a typical performance distribution looks like
(I built the below picture based on a real benchmark that measures the load time of assemblies
when we open the <a href="https://github.com/OrchardCMS/Orchard">Orchard</a> solution in <a href="https://www.jetbrains.com/rider/">Rider</a> on Linux):</p>
<div class="mx-auto">
<a href="/img/posts/normality/performance-light.png" target="_blank">
<picture>
<source theme='dark' srcset="/img/posts/normality/performance-dark.png" media="(prefers-color-scheme: dark)">
<source theme='light' srcset="/img/posts/normality/performance-light.png" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<img class="mx-auto d-block img-fluid" width="800" src="/img/posts/normality/performance-light.png">
</picture>
</a>
</div>
</p>
        <a href='/posts/normality/'>Read more</a><br /><br />
        <hr />
    </div>
    <div class="blog-post">
        <h2 class="blog-post-title"><a href='/posts/edpelt/'>Implementation of efficient algorithm for changepoint detection: ED-PELT</a></h2>
        <span class="blog-post-meta">
          <b>Date:</b> October 07, 2019.
          <b>Tags:</b>
                <a href="/tags/dotnet"><span class="badge badge-pill badge-info">.NET</span></a>
                <a href="/tags/csharp"><span class="badge badge-pill badge-info">C#</span></a>
                <a href="/tags/ed-pelt"><span class="badge badge-pill badge-info">ED-PELT</span></a>
                <a href="/tags/statistics"><span class="badge badge-pill badge-info">Statistics</span></a>
                <a href="/tags/changepoints"><span class="badge badge-pill badge-info">ChangePoints</span></a>
        </span><br /><br />
        <p><a href="https://en.wikipedia.org/wiki/Change_detection">Changepoint detection</a> is an important task that has a lot of applications.
For example, I use it to detect changes in the <a href="https://www.jetbrains.com/rider/">Rider</a> performance test suite.
It's very important to detect not only performance degradations, but any kinds of performance changes
(e.g., the variance may increase, or a unimodal distribution may be split to several modes).
You can see examples of such changes on the following picture (we change the color when a changepoint is detected):</p>
<div class="mx-auto">
<a href="/img/posts/edpelt/edpelt-light.png" target="_blank">
<picture>
<source theme='dark' srcset="/img/posts/edpelt/edpelt-dark.png" media="(prefers-color-scheme: dark)">
<source theme='light' srcset="/img/posts/edpelt/edpelt-light.png" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<img class="mx-auto d-block img-fluid" width="600" src="/img/posts/edpelt/edpelt-light.png">
</picture>
</a>
</div>
<p>Unfortunately, it's pretty hard to write a reliable and fast algorithm for changepoint detection.
Recently, I found a cool paper (<a href="https://link.springer.com/article/10.1007/s11222-016-9687-5">Haynes, K., Fearnhead, P. &amp; Eckley, I.A. &quot;A computationally efficient nonparametric approach for changepoint detection,&quot; Stat Comput (2017) 27: 1293</a>) that describes the ED-PELT algorithm.
It has <code>O(N*log(N))</code> complexity and pretty good detection accuracy.
The reference implementation can be used via the <a href="https://cran.r-project.org/web/packages/changepoint.np/index.html">changepoint.np</a> R package.
However, I can't use <a href="https://www.r-project.org/">R</a> on our build server, so I decided to write my own C# implementation.</p>
</p>
        <a href='/posts/edpelt/'>Read more</a><br /><br />
        <hr />
    </div>
</div>
<nav>
  <ul class="pagination">
          <li class="page-item disabled">
        <a class="page-link" href="#" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
          <span class="sr-only">Previous</span>
        </a>
      </li>
            <li class="page-item active">
          <a class="page-link" href="/posts/">1 <span class="sr-only">(current)</span></a>
        </li>
        <li class="page-item"><a class="page-link" href="/posts/page/2/">2</a></li>
        <li class="page-item"><a class="page-link" href="/posts/page/3/">3</a></li>
        <li class="page-item"><a class="page-link" href="/posts/page/4/">4</a></li>
        <li class="page-item"><a class="page-link" href="/posts/page/5/">5</a></li>
          <li class="page-item">
        <a class="page-link" href='/posts/page/2/' aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
          <span class="sr-only">Next</span>
        </a>
      </li>
      </ul>
</nav>
<hr />
<p style="font-size:150%"><a href="/ru/blog/">More posts in Russian</a></p>
<p>Subscribe: <a href="/rss.xml">RSS</a> <a href="/atom.xml">Atom</a></p>
    </div>

    <footer class="blog-footer">
      <div class="container">
        <p>&copy; 2013–2020 Andrey Akinshin | <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p>
      </div>
    </footer>

    <script src="/js/theme-after.js"></script>
    <!-- jQuery first (header), then popper, then Bootstrap JS. -->
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <!-- Other scripts -->
    <script src="/js/highlight.pack.js"></script>
    <script src="/js/anchor.min.js"></script>
    <script src="/js/custom.js"></script>
  </body>
</html>
