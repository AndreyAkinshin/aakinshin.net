<!doctype html><html lang=en class=h-100><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.74.3"><meta name=author content="Andrey Akinshin"><link href=/img/favicon.ico rel=icon type=image/x-icon><meta name=keywords content="Statistics,Quantile,Effect Size,Research: Gamma Effect Size"><title>Comparing distribution quantiles using gamma effect size | Andrey Akinshin</title><meta name=description content="Two case studies which show how to compare distributions using the gamma effect size"><meta name=twitter:site content="@andrey_akinshin"><meta name=twitter:creator content="@andrey_akinshin"><link href=/css/lumen-bootstrap.min.css theme=light rel=stylesheet type=text/css media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link href=/css/slate-bootstrap.min.css theme=dark rel=stylesheet type=text/css media="(prefers-color-scheme: dark)"><link href=/css/syntax-light.css theme=light rel=stylesheet type=text/css media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link href=/css/syntax-dark.css theme=dark rel=stylesheet type=text/css media="(prefers-color-scheme: dark)"><script src=https://aakinshin.net/js/theme-before.min.26d61b7027fe55e642f0001cef94cb75b567d721086492aab6b4e32d9ee7811d.js></script><script type=module src=https://aakinshin.net/js/dark-mode-toggle.min.882998740b9c4c24677576b997bde5a487246e2e3bd72128a0e922eaa59db029.mjs></script><link href=https://aakinshin.net/css/fontawesome-all.min.50da8736f05b35aac9691de67fe993cbe01b7d88fcf0cb682c3a8f39933fe4a3.css rel=stylesheet type=text/css media=all><link href=https://aakinshin.net/css/about.min.2a76db7cc14055b3bafacc363f453917ab54a818a7db2a0a9b2409c0f6bf07c5.css rel=stylesheet type=text/css media=all><link href=https://aakinshin.net/css/blog.min.ae812fc71daf5160d927febda5a991cee6c361345e3f685d3736931ed7537986.css rel=stylesheet type=text/css media=all><link rel=alternate type=application/rss+xml href=https://aakinshin.net/posts/index.xml title="RSS Feed"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZVB6MXSX32"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-ZVB6MXSX32');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-41419012-5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-41419012-5');</script><script type=text/javascript>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");ym(28700916,"init",{clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src=https://mc.yandex.ru/watch/28700916 style=position:absolute;left:-9999px alt></div></noscript><script src=/js/jquery-3.3.1.slim.min.js></script></head><body><div class=bg-primary><div class="container bg-primary"><nav class="navbar navbar-expand-sm navbar-dark bg-primary"><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link id=nav-link-blog href=https://aakinshin.net/><i class="fas fa-home" title=Home style=color:#fff></i></a></li><li class=nav-item><a class=nav-link id=nav-link-posts href=https://aakinshin.net/posts/>Posts</a></li><li class=nav-item><a class=nav-link id=nav-link-about href=https://aakinshin.net/about/>About</a></li><li class=nav-item><a class=nav-link id=nav-link-pdnb href=https://aakinshin.net/prodotnetbenchmarking/>Pro .NET Benchmarking</a></li></ul><ul class="navbar-nav ml-auto"><li class=nav-item><dark-mode-toggle permanent=true></dark-mode-toggle></li></ul></nav></div></div><div class=container><main id=main><div class=blog-main><div class="blog-post table-sm"><h1 class=blog-post-title id=post-title>Comparing distribution quantiles using gamma effect size</h1><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=2021-02-02>February 2, 2021</time>
&nbsp;&nbsp;
<i class="fas fa-tag"></i>&nbsp;
<a href=https://aakinshin.net/tags/statistics/ class="badge badge-info">Statistics</a>
<a href=https://aakinshin.net/tags/quantile/ class="badge badge-info">Quantile</a>
<a href=https://aakinshin.net/tags/effect-size/ class="badge badge-info">Effect Size</a>
<a href=https://aakinshin.net/tags/research-gamma-es/ class="badge badge-info">Research: Gamma Effect Size</a></span><br><br><p>There are several ways to describe the difference between two distributions.
Here are a few examples:</p><ul><li>Effect sizes based on differences between means (e.g., Cohen&rsquo;s d, Glass&rsquo; Î”, Hedges&rsquo; g)</li><li><a href=https://aakinshin.net/posts/shift-and-ratio-functions/>The shift and ration functions</a> that
estimate differences between matched quantiles.</li></ul><p>In one of the previous post, I <a href=https://aakinshin.net/posts/nonparametric-effect-size/>described</a>
the gamma effect size which is defined not for the mean but for quantiles.
In this post, I want to share a few case studies that demonstrate
how the suggested metric combines the advantages of the above approaches.</p><h3 id=case-study-1-effect-size-and-multimodality>Case Study 1: Effect size and multimodality</h3><p>Let&rsquo;s consider two samples <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> from distributions of the following form:</p><p><span class="math display">\[x \in \textrm{Mixture}(\mathcal{N}(110, 1^2), \mathcal{N}(120, 1^2))
\]</span></p><p><span class="math display">\[y \in \textrm{Mixture}(\mathcal{N}(100, 1^2), \mathcal{N}(130, 1^2))
\]</span></p><p>Each distribution is a mixture of two normal distributions.
The only difference between them is the location of modes:</p><div class=row><div class=mx-auto><a href=/posts/comparing-distributions-using-gamma-es/img/study1-density-light.png target=_blank class=imgldlink alt=study1-density><picture>
<source theme=dark srcset=/posts/comparing-distributions-using-gamma-es/img/study1-density-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/comparing-distributions-using-gamma-es/img/study1-density-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/comparing-distributions-using-gamma-es/img/study1-density-light.png></picture></a></div></div><br><p>If we compare <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> using a central tendency like the mean or the median, we get zero.
The value of the mean and the median for <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> is the same; it equals <span class="math inline">\(115\)</span>.</p><p>However, if we compare these samples using <a href=https://aakinshin.net/posts/nonparametric-effect-size/>the <span class="math inline">\(\gamma_p\)</span> effect size</a>,
we get an interesting chart:</p><div class=row><div class=mx-auto><a href=/posts/comparing-distributions-using-gamma-es/img/study1-gamma-light.png target=_blank class=imgldlink alt=study1-gamma><picture>
<source theme=dark srcset=/posts/comparing-distributions-using-gamma-es/img/study1-gamma-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/comparing-distributions-using-gamma-es/img/study1-gamma-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/comparing-distributions-using-gamma-es/img/study1-gamma-light.png></picture></a></div></div><br><p>Whereas the difference between medians is zero, the distributions are not the same at all!
All the quantile values except the median were changed.
From the above chart, we can conclude that both modes were shifted in opposite directions.</p><p>The same kind of analysis of nonparametric distributions can be implemented
using <a href=https://aakinshin.net/posts/shift-and-ratio-functions/>the shift and ratio functions</a>.
Let&rsquo;s check out another case study that shows the effect size&rsquo;s benefits against the shift and ratio.</p><h3 id=case-study-2-shift-and-ratio-function-vs-effect-size-function>Case Study 2: Shift and ratio function vs. effect Size function</h3><p>Let&rsquo;s consider the following two pair of samples:</p><p><span class="math display">\[x^{(1)} \in \mathcal{N}(100, 5^2),\quad y^{(1)} \in \mathcal{N}(104, 5^2)
\]</span></p><p><span class="math display">\[x^{(2)} \in \mathcal{N}(100, 20^2),\quad y^{(2)} \in \mathcal{N}(104, 20^2)
\]</span></p><p>Now all samples are taken from normal distributions with different mean and standard deviation values.
Here are their density plots:</p><div class=row><div class=mx-auto><a href=/posts/comparing-distributions-using-gamma-es/img/study2-density-light.png target=_blank class=imgldlink alt=study2-density><picture>
<source theme=dark srcset=/posts/comparing-distributions-using-gamma-es/img/study2-density-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/comparing-distributions-using-gamma-es/img/study2-density-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/comparing-distributions-using-gamma-es/img/study2-density-light.png></picture></a></div></div><br><p>The mean/median difference between <span class="math inline">\(x^{(k)}\)</span> and <span class="math inline">\(y^{(k)}\)</span> is <span class="math inline">\(4\)</span> in both cases.
We can see it on the shift function plot:</p><div class=row><div class=mx-auto><a href=/posts/comparing-distributions-using-gamma-es/img/study2-shift-light.png target=_blank class=imgldlink alt=study2-shift><picture>
<source theme=dark srcset=/posts/comparing-distributions-using-gamma-es/img/study2-shift-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/comparing-distributions-using-gamma-es/img/study2-shift-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/comparing-distributions-using-gamma-es/img/study2-shift-light.png></picture></a></div></div><br><p>The relative difference is 4%, which is consistent with the ratio function plot:</p><div class=row><div class=mx-auto><a href=/posts/comparing-distributions-using-gamma-es/img/study2-ratio-light.png target=_blank class=imgldlink alt=study2-ratio><picture>
<source theme=dark srcset=/posts/comparing-distributions-using-gamma-es/img/study2-ratio-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/comparing-distributions-using-gamma-es/img/study2-ratio-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/comparing-distributions-using-gamma-es/img/study2-ratio-light.png></picture></a></div></div><br><p>However, cases are not the same:</p><ul><li>When we compare <span class="math inline">\(x^{(1)}\)</span> and <span class="math inline">\(y^{(1)}\)</span>, the standard deviation is <span class="math inline">\(5\)</span>.
The difference between means/medians is <span class="math inline">\(4\)</span>
which is quite large compared to the dispersion.</li><li>When we compare <span class="math inline">\(x^{(2)}\)</span> and <span class="math inline">\(y^{(2)}\)</span>, the standard deviation is <span class="math inline">\(20\)</span>.
The difference between means/medians is also <span class="math inline">\(4\)</span>,
but it&rsquo;s not so large compared to the dispersion.
While this difference may be <em>statistically significant</em>,
it may be <em>practically insignificant</em>.</li></ul><p>Now let&rsquo;s look at the <span class="math inline">\(\gamma\)</span> effect size function plot:</p><div class=row><div class=mx-auto><a href=/posts/comparing-distributions-using-gamma-es/img/study2-gamma-light.png target=_blank class=imgldlink alt=study2-gamma><picture>
<source theme=dark srcset=/posts/comparing-distributions-using-gamma-es/img/study2-gamma-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/comparing-distributions-using-gamma-es/img/study2-gamma-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/comparing-distributions-using-gamma-es/img/study2-gamma-light.png></picture></a></div></div><br><p>Here we can see that the effect size is large in the first case (<span class="math inline">\(\gamma \approx 0.8\)</span>),
but it&rsquo;s small in the second case (<span class="math inline">\(\gamma \approx 0.2\)</span>).
Such differentiation is one of the main benefits of effect size against the shift and ratio function.</p><h3 id=conclusion>Conclusion</h3><p><span class="math inline">\(\gamma\)</span> effect size is a powerful metric that helps you compare distributions.
It combines the advantages of
the shift and ratio functions (which shows per-quantile differences between distributions)
and the effect size (which shows absolute shift normalized by the dispersion).</p><br><br><div class=row><div class="mx-auto share-block"><div class=share-title>Share:</div><div class=share-button><a href="https://www.reddit.com/submit?url=https%3a%2f%2faakinshin.net%2fposts%2fcomparing-distributions-using-gamma-es%2f&title=Comparing%20distribution%20quantiles%20using%20gamma%20effect%20size" target=_blank title="Share on Reddit"><i class="fab fa-reddit fa-2x"></i></a></div><div class=share-button><a href="https://twitter.com/intent/tweet?text=Comparing%20distribution%20quantiles%20using%20gamma%20effect%20size&url=https%3a%2f%2faakinshin.net%2fposts%2fcomparing-distributions-using-gamma-es%2f&via=andrey_akinshin&related=andrey_akinshin" rel=nofollow target=_blank title="Share on Twitter"><i class="fab fa-twitter fa-2x"></i></a></div><div class=share-button><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2faakinshin.net%2fposts%2fcomparing-distributions-using-gamma-es%2f" target=_blank title="Share on HackerNews"><i class="fab fa-hacker-news fa-2x"></i></a></div><div class=share-button><a href="https://getpocket.com/save?url=https%3a%2f%2faakinshin.net%2fposts%2fcomparing-distributions-using-gamma-es%2f&title=Comparing%20distribution%20quantiles%20using%20gamma%20effect%20size" target=_blank title="Add to Pocket"><i class="fab fa-get-pocket fa-2x"></i></a></div></div></div></div><hr></div></div></main></div><footer class=blog-footer><div class=container><p>&copy; 2013&mdash;2022 Andrey Akinshin
|
<a href=https://github.com/AndreyAkinshin><i class="fab fa-github" title=GitHub></i></a><a href=https://twitter.com/andrey_akinshin><i class="fab fa-twitter" title=Twitter></i></a><a href=https://aakinshin.net/posts/index.xml><i class="fas fa-rss" title=RSS></i></a>|
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a></p></div></footer><script src=https://aakinshin.net/js/theme-after.min.082780cb948cc57eabbc0d80172a7a5347d5572b599938b4c9876dfd7978b424.js></script><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/anchor.min.js></script><script src=https://aakinshin.net/js/custom.min.11932490dde776463ed165b345838c701accc0cfdedf2e0868f13415f41f0872.js></script><script>window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true,},options:{skipHtmlTags:['script','noscript','style','textarea','pre'],ignoreHtmlClass:'tex2jax_ignore',processHtmlClass:'tex2jax_process'}};</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></body></html>