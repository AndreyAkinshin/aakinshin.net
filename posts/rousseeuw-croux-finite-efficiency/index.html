<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.103.0-DEV"><meta name=author content="Andrey Akinshin"><link href=/img/favicon.ico rel=icon type=image/x-icon><meta name=keywords content="Mathematics,Statistics,Research,Research: finite-sample Rousseeuw-Croux scale estimators,Rousseeuw-Croux,Statistical efficiency"><title>Finite-sample efficiency of the Rousseeuw-Croux estimators | Andrey Akinshin</title><meta name=description content="The Rousseeuw-Croux \(S_n\) and \(Q_n\) estimators are robust and efficient measures of scale. Their breakdown points are equal to \(0.5\) which is also th..."><meta name=twitter:site content="@andrey_akinshin"><meta name=twitter:creator content="@andrey_akinshin"><script>localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")</script><link href=https://aakinshin.net/css/main.min.13341ac97e21004cde7f286e6b392a1234aa8b2656426c008cfd9f98cd200dd1.css rel=stylesheet type=text/css media=all><link rel=alternate type=application/rss+xml href=https://aakinshin.net/posts/index.xml title="RSS Feed"></head><body><nav><div class="container flex flex-wrap items-center justify-between mx-auto max-w-6xl h-12 px-6"><div class="flex items-center justify-start justify-self-start"><div class="flex nav-item h-12 w-12 items-center justify-center"><a class=text-white href=https://aakinshin.net/><svg class="fai w-5 h-5 pr-0 mb-0.5"><use xlink:href="/img/fa/all.svg#house-chimney"/></svg></a></div><div class="flex nav-item h-12 items-center"><a class="px-3 text-white" href=https://aakinshin.net/posts/>Posts</a></div><div class="flex nav-item h-12 items-center"><a class="px-3 text-white" href=https://aakinshin.net/research/>Research</a></div><div class="flex nav-item h-12 items-center"><a class="px-3 text-white" href=https://aakinshin.net/about/>About</a></div></div><button id=theme-toggle type=button class="nav-item p-3 content-center justify-self-end"><svg id="theme-toggle-dark-icon" class="hidden w-6 h-6" fill="currentcolor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001.0 1010.586 10.586z"/></svg><svg id="theme-toggle-light-icon" class="hidden w-6 h-6" fill="currentcolor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1A1 1 0 119 4V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707A1 1 0 1113.536 5.05l.707-.707a1 1 0 011.414.0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707A1 1 0 004.343 5.757l.707.707zm1.414 8.486-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"/></svg></button></div></nav><div class="main container mx-auto max-w-6xl px-6"><div class=main-post><h1 class=blog-post-title id=post-title>Finite-sample efficiency of the Rousseeuw-Croux estimators</h1><div class="flex flex-wrap justify-start items-center"><svg class="fai text-accent-l dark:text-front-d"><title>Date</title><use xlink:href="/img/fa/all.svg#calendar-days"/></svg><time datetime=2022-08-09>August 9, 2022</time><svg class="fai ml-3 text-accent-l dark:text-front-d"><title>Tags</title><use xlink:href="/img/fa/all.svg#tag"/></svg><div class="flex flex-wrap gap-y-1"><a class=label-link href=https://aakinshin.net/tags/mathematics/>Mathematics</a>
<a class=label-link href=https://aakinshin.net/tags/statistics/>Statistics</a>
<a class=label-link href=https://aakinshin.net/tags/research/>Research</a>
<a class=label-link href=https://aakinshin.net/tags/research-frc/>Research: finite-sample Rousseeuw-Croux scale estimators</a>
<a class=label-link href=https://aakinshin.net/tags/rousseeuw-croux/>Rousseeuw-Croux</a>
<a class=label-link href=https://aakinshin.net/tags/statistical-efficiency/>Statistical efficiency</a></div></div><br><div class="main-content mb-3 px-2 py-1 rounded border text-alert-text-l border-alert-frame-l dark:text-alert-text-d dark:border-alert-frame-d">Update: this blog post is a part of research that aimed to investigate finite-sample properties of the Rousseeuw-Croux scale estimators. A <a href=/posts/preprint-frc/>preprint with final results</a> is available on arXiv: <a href=https://arxiv.org/abs/2209.12268>arXiv:2209.12268 [stat.ME]</a>. Some information in this blog post can be obsolete: please, use the preprint as the primary reference.</div><div class=main-content><p>The Rousseeuw-Croux <span class="math inline">\(S_n\)</span> and <span class="math inline">\(Q_n\)</span> estimators are robust and efficient measures of scale.
Their breakdown points are equal to <span class="math inline">\(0.5\)</span> which is also the breakdown point of the median absolute deviation (MAD).
However, their statistical efficiency values are much better than the efficiency of MAD.
To be specific, the MAD asymptotic relative Gaussian efficiency against the standard deviation is about <span class="math inline">\(37\%\)</span>,
whereas the corresponding values for <span class="math inline">\(S_n\)</span> and <span class="math inline">\(Q_n\)</span> are <span class="math inline">\(58\%\)</span> and <span class="math inline">\(82\%\)</span> respectively.
Although these numbers are quite impressive, they are only <em>asymptotic</em> values.
In practice, we work with finite samples.
And the <em>finite-sample efficiency</em> could be much lower than the asymptotic one.
In this post, we perform a simulation study in order to obtain the actual finite-sample efficiency values
for these two estimators.</p><h3 id=introduction>Introduction</h3><p>The <span class="math inline">\(S_n\)</span> and <span class="math inline">\(Q_n\)</span> estimators are presented in <a href=#Rousseeuw1993>[Rousseeuw1993]</a>.
For a sample <span class="math inline">\(x = \{ x_1, x_2, \ldots, x_n \}\)</span>, they are defined as follows:</p><p><span class="math display">\[S_n = c_n \cdot 1.1926 \cdot \operatorname{lowmed}_i \; \operatorname{highmed}_j \; |x_i - x_j|,
\]</span></p><p><span class="math display">\[Q_n = d_n \cdot 2.2191 \cdot \{ |x_i-x_j|; i < j \}_{(k)},
\]</span></p><p>where</p><ul><li><span class="math inline">\(\operatorname{lowmed}\)</span> is the <span class="math inline">\(\lfloor (n+1) / 2 \rfloor^\textrm{th}\)</span> order statistic out of <span class="math inline">\(n\)</span> numbers,</li><li><span class="math inline">\(\operatorname{highmed}\)</span> is the <span class="math inline">\((\lfloor n / 2 \rfloor + 1)^\textrm{th}\)</span> order statistic out of <span class="math inline">\(n\)</span> numbers,</li><li><span class="math inline">\(c_n\)</span>, <span class="math inline">\(d_n\)</span> are bias-correction factors for finite samples (some approximation can be found in <a href=#Rousseeuw1992>[Rousseeuw1993]</a>),</li><li><span class="math inline">\(k = \binom{\lfloor n / 2 \rfloor + 1}{2}\)</span>,</li><li><span class="math inline">\({}_{(k)}\)</span> is the <span class="math inline">\(k^\textrm{th}\)</span> order statistic.</li></ul><p>In this post, we also use the unbiased standard deviation which is defined as follows:</p><p><span class="math display">\[s_n = \sqrt{\frac{1}{n} \sum_{i=1}^n (x_i - \bar{x})^2} \bigg/ c_4(n), \quad
c_4(n) = \sqrt{\frac{2}{n-1}}\frac{\Gamma(\frac{n}{2})}{\Gamma(\frac{n-1}{2})}.
\]</span></p><p>The median absolute deviation uses the bias-correction factors presented in <a href=#Akinshin2022>[Akinshin2022]</a>.</p><h3 id=relative-efficiency>Relative efficiency</h3><p>In order to evaluate the relative statistical efficiency against the standard deviation under normality,
we perform the following simulation study:</p><ul><li>Enumerate various sample sizes <span class="math inline">\(n\)</span> between <span class="math inline">\(3\)</span> and <span class="math inline">\(200\)</span>.</li><li>For each sample size <span class="math inline">\(n\)</span>, generate <span class="math inline">\(300\,000\)</span> random samples from the standard normal distribution.</li><li>For each sample, estimate <span class="math inline">\(s_n\)</span>, <span class="math inline">\(\operatorname{MAD}_n\)</span>, <span class="math inline">\(S_n\)</span>, <span class="math inline">\(Q_n\)</span>.</li><li>For each <span class="math inline">\(n\)</span>, calculate the relative statistical efficiency of <span class="math inline">\(\operatorname{MAD}_n\)</span>, <span class="math inline">\(S_n\)</span>, <span class="math inline">\(Q_n\)</span> against <span class="math inline">\(s_n\)</span> as
<span class="math inline">\(e(T_n) = \mathbb{V}(s_n) / \mathbb{V}(T_n)\)</span>.</li></ul><p>Here is the plot with results for <span class="math inline">\(n \leq 30\)</span>:</p><div class="flex my-7 justify-center"><a class="img-light hidden" href=/posts/rousseeuw-croux-finite-efficiency/img/eff30-light.png target=_blank alt=eff30><img src=/posts/rousseeuw-croux-finite-efficiency/img/eff30-light.png width=800></a>
<a class="img-dark hidden" href=/posts/rousseeuw-croux-finite-efficiency/img/eff30-dark.png target=_blank alt=eff30><img src=/posts/rousseeuw-croux-finite-efficiency/img/eff30-dark.png width=800></a></div><p>Here is the plot with all the results:</p><div class="flex my-7 justify-center"><a class="img-light hidden" href=/posts/rousseeuw-croux-finite-efficiency/img/eff-light.png target=_blank alt=eff><img src=/posts/rousseeuw-croux-finite-efficiency/img/eff-light.png width=800></a>
<a class="img-dark hidden" href=/posts/rousseeuw-croux-finite-efficiency/img/eff-dark.png target=_blank alt=eff><img src=/posts/rousseeuw-croux-finite-efficiency/img/eff-dark.png width=800></a></div><p>And here is a table with raw results:</p><table><thead><tr><th align=right>n</th><th align=right>MADn</th><th align=right>Sn</th><th align=right>Qn</th></tr></thead><tbody><tr><td align=right>3</td><td align=right>0.40056</td><td align=right>0.39961</td><td align=right>0.40050</td></tr><tr><td align=right>4</td><td align=right>0.54508</td><td align=right>0.61005</td><td align=right>0.60883</td></tr><tr><td align=right>5</td><td align=right>0.38591</td><td align=right>0.43430</td><td align=right>0.45723</td></tr><tr><td align=right>6</td><td align=right>0.46360</td><td align=right>0.53221</td><td align=right>0.61139</td></tr><tr><td align=right>7</td><td align=right>0.37928</td><td align=right>0.47172</td><td align=right>0.50996</td></tr><tr><td align=right>8</td><td align=right>0.43342</td><td align=right>0.51068</td><td align=right>0.62214</td></tr><tr><td align=right>9</td><td align=right>0.37609</td><td align=right>0.50004</td><td align=right>0.55606</td></tr><tr><td align=right>10</td><td align=right>0.41836</td><td align=right>0.51644</td><td align=right>0.63429</td></tr><tr><td align=right>11</td><td align=right>0.37439</td><td align=right>0.52677</td><td align=right>0.58308</td></tr><tr><td align=right>12</td><td align=right>0.40849</td><td align=right>0.51998</td><td align=right>0.64626</td></tr><tr><td align=right>13</td><td align=right>0.37316</td><td align=right>0.53525</td><td align=right>0.60392</td></tr><tr><td align=right>14</td><td align=right>0.40201</td><td align=right>0.52536</td><td align=right>0.65607</td></tr><tr><td align=right>15</td><td align=right>0.37222</td><td align=right>0.54263</td><td align=right>0.62221</td></tr><tr><td align=right>16</td><td align=right>0.39739</td><td align=right>0.53126</td><td align=right>0.66562</td></tr><tr><td align=right>17</td><td align=right>0.37139</td><td align=right>0.54889</td><td align=right>0.63675</td></tr><tr><td align=right>18</td><td align=right>0.39366</td><td align=right>0.53715</td><td align=right>0.67473</td></tr><tr><td align=right>19</td><td align=right>0.37107</td><td align=right>0.55365</td><td align=right>0.65006</td></tr><tr><td align=right>20</td><td align=right>0.39082</td><td align=right>0.54198</td><td align=right>0.68261</td></tr><tr><td align=right>21</td><td align=right>0.37103</td><td align=right>0.55860</td><td align=right>0.66187</td></tr><tr><td align=right>22</td><td align=right>0.38881</td><td align=right>0.54660</td><td align=right>0.69007</td></tr><tr><td align=right>23</td><td align=right>0.37045</td><td align=right>0.56210</td><td align=right>0.67145</td></tr><tr><td align=right>24</td><td align=right>0.38668</td><td align=right>0.55075</td><td align=right>0.69604</td></tr><tr><td align=right>25</td><td align=right>0.37021</td><td align=right>0.56561</td><td align=right>0.68085</td></tr><tr><td align=right>26</td><td align=right>0.38536</td><td align=right>0.55466</td><td align=right>0.70290</td></tr><tr><td align=right>27</td><td align=right>0.36995</td><td align=right>0.56805</td><td align=right>0.68823</td></tr><tr><td align=right>28</td><td align=right>0.38350</td><td align=right>0.55716</td><td align=right>0.70705</td></tr><tr><td align=right>29</td><td align=right>0.36956</td><td align=right>0.57074</td><td align=right>0.69561</td></tr><tr><td align=right>30</td><td align=right>0.38197</td><td align=right>0.55959</td><td align=right>0.71301</td></tr><tr><td align=right>31</td><td align=right>0.36961</td><td align=right>0.57241</td><td align=right>0.70165</td></tr><tr><td align=right>32</td><td align=right>0.38113</td><td align=right>0.56236</td><td align=right>0.71696</td></tr><tr><td align=right>33</td><td align=right>0.36911</td><td align=right>0.57396</td><td align=right>0.70695</td></tr><tr><td align=right>34</td><td align=right>0.38071</td><td align=right>0.56534</td><td align=right>0.72204</td></tr><tr><td align=right>35</td><td align=right>0.36918</td><td align=right>0.57624</td><td align=right>0.71234</td></tr><tr><td align=right>36</td><td align=right>0.37966</td><td align=right>0.56656</td><td align=right>0.72613</td></tr><tr><td align=right>37</td><td align=right>0.36942</td><td align=right>0.57783</td><td align=right>0.71760</td></tr><tr><td align=right>38</td><td align=right>0.37876</td><td align=right>0.56863</td><td align=right>0.72929</td></tr><tr><td align=right>39</td><td align=right>0.36880</td><td align=right>0.57860</td><td align=right>0.72118</td></tr><tr><td align=right>40</td><td align=right>0.37813</td><td align=right>0.57007</td><td align=right>0.73307</td></tr><tr><td align=right>41</td><td align=right>0.36864</td><td align=right>0.57944</td><td align=right>0.72553</td></tr><tr><td align=right>42</td><td align=right>0.37778</td><td align=right>0.57167</td><td align=right>0.73592</td></tr><tr><td align=right>43</td><td align=right>0.36902</td><td align=right>0.58136</td><td align=right>0.72991</td></tr><tr><td align=right>44</td><td align=right>0.37771</td><td align=right>0.57314</td><td align=right>0.73867</td></tr><tr><td align=right>45</td><td align=right>0.36872</td><td align=right>0.58165</td><td align=right>0.73254</td></tr><tr><td align=right>46</td><td align=right>0.37698</td><td align=right>0.57415</td><td align=right>0.74231</td></tr><tr><td align=right>47</td><td align=right>0.36845</td><td align=right>0.58213</td><td align=right>0.73608</td></tr><tr><td align=right>48</td><td align=right>0.37643</td><td align=right>0.57513</td><td align=right>0.74428</td></tr><tr><td align=right>49</td><td align=right>0.36810</td><td align=right>0.58270</td><td align=right>0.73894</td></tr><tr><td align=right>50</td><td align=right>0.37673</td><td align=right>0.57648</td><td align=right>0.74764</td></tr><tr><td align=right>51</td><td align=right>0.36879</td><td align=right>0.58407</td><td align=right>0.74207</td></tr><tr><td align=right>60</td><td align=right>0.37452</td><td align=right>0.57965</td><td align=right>0.75597</td></tr><tr><td align=right>61</td><td align=right>0.36842</td><td align=right>0.58606</td><td align=right>0.75376</td></tr><tr><td align=right>70</td><td align=right>0.37376</td><td align=right>0.58194</td><td align=right>0.76447</td></tr><tr><td align=right>71</td><td align=right>0.36843</td><td align=right>0.58793</td><td align=right>0.76228</td></tr><tr><td align=right>80</td><td align=right>0.37277</td><td align=right>0.58361</td><td align=right>0.77094</td></tr><tr><td align=right>81</td><td align=right>0.36827</td><td align=right>0.58799</td><td align=right>0.76872</td></tr><tr><td align=right>90</td><td align=right>0.37247</td><td align=right>0.58455</td><td align=right>0.77612</td></tr><tr><td align=right>91</td><td align=right>0.36790</td><td align=right>0.58805</td><td align=right>0.77317</td></tr><tr><td align=right>100</td><td align=right>0.37184</td><td align=right>0.58492</td><td align=right>0.77968</td></tr><tr><td align=right>101</td><td align=right>0.36814</td><td align=right>0.58838</td><td align=right>0.77800</td></tr><tr><td align=right>110</td><td align=right>0.37137</td><td align=right>0.58529</td><td align=right>0.78308</td></tr><tr><td align=right>111</td><td align=right>0.36806</td><td align=right>0.58864</td><td align=right>0.78142</td></tr><tr><td align=right>120</td><td align=right>0.37093</td><td align=right>0.58538</td><td align=right>0.78582</td></tr><tr><td align=right>121</td><td align=right>0.36853</td><td align=right>0.58878</td><td align=right>0.78514</td></tr><tr><td align=right>130</td><td align=right>0.37063</td><td align=right>0.58551</td><td align=right>0.78816</td></tr><tr><td align=right>131</td><td align=right>0.36800</td><td align=right>0.58835</td><td align=right>0.78685</td></tr><tr><td align=right>140</td><td align=right>0.37080</td><td align=right>0.58553</td><td align=right>0.79057</td></tr><tr><td align=right>141</td><td align=right>0.36793</td><td align=right>0.58861</td><td align=right>0.78943</td></tr><tr><td align=right>150</td><td align=right>0.37045</td><td align=right>0.58567</td><td align=right>0.79202</td></tr><tr><td align=right>151</td><td align=right>0.36798</td><td align=right>0.58804</td><td align=right>0.79157</td></tr><tr><td align=right>160</td><td align=right>0.37040</td><td align=right>0.58572</td><td align=right>0.79443</td></tr><tr><td align=right>161</td><td align=right>0.36817</td><td align=right>0.58822</td><td align=right>0.79363</td></tr><tr><td align=right>170</td><td align=right>0.37031</td><td align=right>0.58572</td><td align=right>0.79571</td></tr><tr><td align=right>171</td><td align=right>0.36781</td><td align=right>0.58766</td><td align=right>0.79449</td></tr><tr><td align=right>180</td><td align=right>0.37001</td><td align=right>0.58590</td><td align=right>0.79686</td></tr><tr><td align=right>181</td><td align=right>0.36751</td><td align=right>0.58749</td><td align=right>0.79582</td></tr><tr><td align=right>190</td><td align=right>0.36977</td><td align=right>0.58513</td><td align=right>0.79752</td></tr><tr><td align=right>191</td><td align=right>0.36747</td><td align=right>0.58678</td><td align=right>0.79695</td></tr><tr><td align=right>200</td><td align=right>0.36960</td><td align=right>0.58556</td><td align=right>0.79917</td></tr><tr><td align=right>201</td><td align=right>0.36806</td><td align=right>0.58749</td><td align=right>0.79857</td></tr></tbody></table><h3 id=conclusion>Conclusion</h3><p>As we can see, on small samples relative efficiency of <span class="math inline">\(S_n\)</span> and <span class="math inline">\(Q_n\)</span> are still better than the efficiency of
<span class="math inline">\(\operatorname{MAD}_n\)</span>, but it is much lower than the asymptotic values.</p><h3 id=references>References</h3><ul><li><b id=Rousseeuw1992>[Rousseeuw1992]</b><br>Croux, Christophe, and Peter J. Rousseeuw.
“Time-Efficient Algorithms for Two Highly Robust Estimators of Scale.”
In Computational Statistics, edited by Yadolah Dodge and Joe Whittaker, 411–28.
Heidelberg: Physica-Verlag HD, 1992.<br><a href=https://doi.org/10.1007/978-3-662-26811-7_58>https://doi.org/10.1007/978-3-662-26811-7_58</a></li><li><b id=Rousseeuw1993>[Rousseeuw1993]</b><br>Rousseeuw, Peter J., and Christophe Croux.
“Alternatives to the Median Absolute Deviation.”
Journal of the American Statistical Association 88, no. 424 (December 1, 1993): 1273–83.<br><a href=https://doi.org/10.1080/01621459.1993.10476408>https://doi.org/10.1080/01621459.1993.10476408</a></li><li><b id=Akinshin2022>[Akinshin2022]</b><br>Andrey Akinshin (2022)
&ldquo;Finite-sample bias-correction factors for the median absolute deviation based on the Harrell-Davis quantile estimator and its trimmed modification,&rdquo;
<a href=https://arxiv.org/abs/2207.12005>arXiv:2207.12005</a></li></ul></div><br><br><div class="flex flex-wrap justify-center items-center">The source code of this post and all the relevant files are&nbsp;<a href=https://github.com/AndreyAkinshin/aakinshin.net/tree/master/content/en/posts/2022/08/rousseeuw-croux-finite-efficiency/index.md>available on GitHub</a>.</div><div class="flex flex-wrap justify-center items-center mb-5"><span>Share:</span><div class="text-4xl pl-3"><a href="https://www.reddit.com/submit?url=https%3a%2f%2faakinshin.net%2fposts%2frousseeuw-croux-finite-efficiency%2f&title=Finite-sample%20efficiency%20of%20the%20Rousseeuw-Croux%20estimators" target=_blank title="Share on Reddit"><svg class="fai fai-link"><use xlink:href="/img/fa/all.svg#reddit"/></svg></a></div><div class="text-4xl pl-3"><a href="https://twitter.com/intent/tweet?text=Finite-sample%20efficiency%20of%20the%20Rousseeuw-Croux%20estimators&url=https%3a%2f%2faakinshin.net%2fposts%2frousseeuw-croux-finite-efficiency%2f&via=andrey_akinshin&related=andrey_akinshin" rel=nofollow target=_blank title="Share on Twitter"><svg class="fai fai-link"><use xlink:href="/img/fa/all.svg#twitter"/></svg></a></div><div class="text-4xl pl-3"><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2faakinshin.net%2fposts%2frousseeuw-croux-finite-efficiency%2f" target=_blank title="Share on HackerNews"><svg class="fai fai-link"><use xlink:href="/img/fa/all.svg#hacker-news"/></svg></a></div><div class="text-4xl pl-3"><a href="https://getpocket.com/save?url=https%3a%2f%2faakinshin.net%2fposts%2frousseeuw-croux-finite-efficiency%2f&title=Finite-sample%20efficiency%20of%20the%20Rousseeuw-Croux%20estimators" target=_blank title="Add to Pocket"><svg class="fai fai-link"><use xlink:href="/img/fa/all.svg#get-pocket"/></svg></a></div></div></div></div><script>var themeToggleDarkIcon=document.getElementById("theme-toggle-dark-icon"),themeToggleBtn,themeToggleLightIcon=document.getElementById("theme-toggle-light-icon");const imagesDark=document.querySelectorAll(".img-dark"),imagesLight=document.querySelectorAll(".img-light");localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(themeToggleLightIcon.classList.remove("hidden"),imagesDark.forEach(e=>{e.classList.remove("hidden")})):(themeToggleDarkIcon.classList.remove("hidden"),imagesLight.forEach(e=>{e.classList.remove("hidden")})),themeToggleBtn=document.getElementById("theme-toggle"),themeToggleBtn.addEventListener("click",function(){themeToggleDarkIcon.classList.toggle("hidden"),themeToggleLightIcon.classList.toggle("hidden"),imagesLight.forEach(e=>{e.classList.toggle("hidden")}),imagesDark.forEach(e=>{e.classList.toggle("hidden")}),localStorage.getItem("color-theme")?localStorage.getItem("color-theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark"))})</script><footer class="z-20 p-4 md:p-6 mt-3 w-full border-t border-gray-200 shadow flex items-center justify-center dark:border-gray-600 bg-white dark:bg-zinc-800"><span class="dark:text-gray-400 text-center">© 2013—2023 <span class=whitespace-nowrap>Andrey Akinshin</span></span><ul class="flex flex-wrap items-center px-4 mb-1"><li><a href=https://github.com/AndreyAkinshin><svg class="fai fai-link w-5 h-5"><title>GitHub</title><use xlink:href="/img/fa/all.svg#github"/></svg></a></li><li><a href=https://twitter.com/andrey_akinshin><svg class="fai fai-link w-5 h-5"><title>Twitter</title><use xlink:href="/img/fa/all.svg#twitter"/></svg></a></li><li><a href=https://aakinshin.net/posts/index.xml><svg class="fai fai-link w-5 h-5"><title>RSS</title><use xlink:href="/img/fa/all.svg#rss"/></svg></a></li></ul><div class=main-content><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a></div></footer><script>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"],ignoreHtmlClass:"tex2jax_ignore",processHtmlClass:"tex2jax_process"}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script></body></html>