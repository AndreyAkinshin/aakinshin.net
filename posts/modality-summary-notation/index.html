<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.103.0-DEV"><meta name=author content="Andrey Akinshin"><link href=/img/favicon.ico rel=icon type=image/x-icon><meta name=keywords content="Mathematics,Statistics,Research,Multimodality,QRDE,Harrell-Davis quantile estimator,Outliers"><title>Plain-text summary notation for multimodal distributions | Andrey Akinshin</title><meta name=description content="In this post, we consider a plain-text notation for multimodal distributions that highlights modes and outliers"><meta name=twitter:site content="@andrey_akinshin"><meta name=twitter:creator content="@andrey_akinshin"><script src=https://cdn.tailwindcss.com/3.2.4></script>
<script>tailwind.config={darkMode:"class"}</script><style type=text/tailwindcss>
    @layer base {
       
      body {
        @apply bg-white dark:bg-zinc-800;
        @apply text-black dark:text-gray-400;
      }
      nav {
        @apply bg-sky-800 dark:bg-zinc-900;
      }
      a {
        @apply text-sky-600 dark:text-white;
        @apply no-underline;
      }
      .main-content a:not(.label-link) {
        @apply hover:underline;
      }
      hr {
        @apply h-px my-3 border-0 bg-gray-300 dark:bg-gray-600;
      }
      h1, h2, h3, h4, h5, h6 {
        @apply leading-tight;
      }
      h1, h2, h3 {
        @apply text-4xl py-4;
      }
      h4 {
        @apply text-3xl py-3;
      }
      h5, h6 {
        @apply text-2xl py-2;
      }
      table {
        @apply border self-center mx-auto;
      }
      th, td {
        @apply border p-2
      }
      blockquote {
        @apply border-l-8 border-gray-300 bg-gray-100 dark:border-zinc-600 dark:bg-zinc-700;
        @apply ml-4 my-4 px-4 py-2;
      }
       
      .main ul {
        @apply list-disc ml-10 my-2;
      }
      .main ol {
        @apply list-decimal ml-10 my-2;
      }
      .main p {
        @apply mb-3;
      }
       
      .label {
        @apply mx-1 px-1 py-0.5 whitespace-nowrap;
        @apply rounded border border-gray-400 dark:border-gray-500;
      }
      .label-link {
        @apply mx-1 px-1 py-0.5 whitespace-nowrap;
        @apply rounded border border-sky-600 dark:border-slate-400;
        @apply hover:bg-sky-200 dark:hover:bg-gray-500;
      }
      .nav-item {
        @apply text-white hover:bg-sky-700 dark:hover:bg-gray-700;
      }
       
      .paginator {
        @apply flex flex-wrap justify-center mb-4;
      }
      .paginator .page-item {
        @apply inline-flex border rounded px-3 py-1;
      }
      .paginator .page-item:not(.active):not(.disabled) {
        @apply border-gray-400 dark:border-gray-400;
      }
      .paginator .page-item.active {
        @apply border-sky-600 dark:border-white;
      }
      .paginator .page-item.disabled {
        @apply bg-gray-50 dark:bg-gray-500 dark:border-gray-400;
      }
      .paginator .page-item.disabled a {
        @apply text-gray-400 dark:text-gray-400;
      }
       
      .block-example {
        @apply my-4 pl-3;
        @apply border-l-8 border-gray-300 dark:border-zinc-600;
      }
       
      #about img {
        @apply inline-flex h-4;
      }
       
      .fai {
        @apply inline-flex h-[1.2em] w-[1.2em] pr-[0.4em] fill-current;
      }
      .fai-link {
        @apply hover:text-sky-400 dark:hover:text-blue-400;
      }
      .label-link .fai {
        @apply pl-1 pb-1 h-[1.5em] w-[1.5em];
      }
       
      .chroma {
        @apply my-5 overflow-y-scroll;
        @apply p-1 border rounded;
      }
    }
  </style><style>.block-example-title::before{counter-increment:example;content:"Example " counter(example)}body{counter-reset:example}code.has-jax{-webkit-font-smoothing:antialiased;background:inherit!important;border:none!important;font-size:100%}*:hover>.anchorjs-link{margin-left:-1.125em!important}.chroma{background-color:#fff}.chroma .x{}.chroma .err{color:#a61717;background-color:#e3d2d2}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block}.chroma .hl{display:block;width:100%;background-color:#ffc}.chroma .lnt{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .ln{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .k{color:#000;font-weight:700}.chroma .kc{color:#000;font-weight:700}.chroma .kd{color:#000;font-weight:700}.chroma .kn{color:#000;font-weight:700}.chroma .kp{color:#000;font-weight:700}.chroma .kr{color:#000;font-weight:700}.chroma .kt{color:#458;font-weight:700}.chroma .n{}.chroma .na{color:teal}.chroma .nb{color:#0086b3}.chroma .bp{color:#999}.chroma .nc{color:#458;font-weight:700}.chroma .no{color:teal}.chroma .nd{color:#3c5d5d;font-weight:700}.chroma .ni{color:purple}.chroma .ne{color:#900;font-weight:700}.chroma .nf{color:#900;font-weight:700}.chroma .fm{}.chroma .nl{color:#900;font-weight:700}.chroma .nn{color:#555}.chroma .nx{}.chroma .py{}.chroma .nt{color:navy}.chroma .nv{color:teal}.chroma .vc{color:teal}.chroma .vg{color:teal}.chroma .vi{color:teal}.chroma .vm{}.chroma .l{}.chroma .ld{}.chroma .s{color:#d14}.chroma .sa{color:#d14}.chroma .sb{color:#d14}.chroma .sc{color:#d14}.chroma .dl{color:#d14}.chroma .sd{color:#d14}.chroma .s2{color:#d14}.chroma .se{color:#d14}.chroma .sh{color:#d14}.chroma .si{color:#d14}.chroma .sx{color:#d14}.chroma .sr{color:#009926}.chroma .s1{color:#d14}.chroma .ss{color:#990073}.chroma .m{color:#099}.chroma .mb{color:#099}.chroma .mf{color:#099}.chroma .mh{color:#099}.chroma .mi{color:#099}.chroma .il{color:#099}.chroma .mo{color:#099}.chroma .o{color:#000;font-weight:700}.chroma .ow{color:#000;font-weight:700}.chroma .p{}.chroma .c{color:#998;font-style:italic}.chroma .ch{color:#998;font-style:italic}.chroma .cm{color:#998;font-style:italic}.chroma .c1{color:#998;font-style:italic}.chroma .cs{color:#999;font-weight:700;font-style:italic}.chroma .cp{color:#999;font-weight:700;font-style:italic}.chroma .cpf{color:#999;font-weight:700;font-style:italic}.chroma .g{}.chroma .gd{color:#000;background-color:#fdd}.chroma .ge{color:#000;font-style:italic}.chroma .gr{color:#a00}.chroma .gh{color:#999}.chroma .gi{color:#000;background-color:#dfd}.chroma .go{color:#888}.chroma .gp{color:#555}.chroma .gs{font-weight:700}.chroma .gu{color:#aaa}.chroma .gt{color:#a00}.chroma .gl{text-decoration:underline}.chroma .w{color:#bbb}.dark.chroma{color:#f8f8f2;background-color:#272822}.dark .chroma{color:#f8f8f2;background-color:#272822}.dark .chroma .x{}.dark .chroma .err{color:#960050;background-color:#1e0010}.dark .chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.dark .chroma .lntable{border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block}.dark .chroma .hl{display:block;width:100%;background-color:#ffc}.dark .chroma .lnt{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.dark .chroma .ln{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.dark .chroma .k{color:#66d9ef}.dark .chroma .kc{color:#66d9ef}.dark .chroma .kd{color:#66d9ef}.dark .chroma .kn{color:#f92672}.dark .chroma .kp{color:#66d9ef}.dark .chroma .kr{color:#66d9ef}.dark .chroma .kt{color:#66d9ef}.dark .chroma .n{}.dark .chroma .na{color:#a6e22e}.dark .chroma .nb{}.dark .chroma .bp{}.dark .chroma .nc{color:#a6e22e}.dark .chroma .no{color:#66d9ef}.dark .chroma .nd{color:#a6e22e}.dark .chroma .ni{}.dark .chroma .ne{color:#a6e22e}.dark .chroma .nf{color:#a6e22e}.dark .chroma .fm{}.dark .chroma .nl{}.dark .chroma .nn{}.dark .chroma .nx{color:#a6e22e}.dark .chroma .py{}.dark .chroma .nt{color:#f92672}.dark .chroma .nv{}.dark .chroma .vc{}.dark .chroma .vg{}.dark .chroma .vi{}.dark .chroma .vm{}.dark .chroma .l{color:#ae81ff}.dark .chroma .ld{color:#e6db74}.dark .chroma .s{color:#e6db74}.dark .chroma .sa{color:#e6db74}.dark .chroma .sb{color:#e6db74}.dark .chroma .sc{color:#e6db74}.dark .chroma .dl{color:#e6db74}.dark .chroma .sd{color:#e6db74}.dark .chroma .s2{color:#e6db74}.dark .chroma .se{color:#ae81ff}.dark .chroma .sh{color:#e6db74}.dark .chroma .si{color:#e6db74}.dark .chroma .sx{color:#e6db74}.dark .chroma .sr{color:#e6db74}.dark .chroma .s1{color:#e6db74}.dark .chroma .ss{color:#e6db74}.dark .chroma .m{color:#ae81ff}.dark .chroma .mb{color:#ae81ff}.dark .chroma .mf{color:#ae81ff}.dark .chroma .mh{color:#ae81ff}.dark .chroma .mi{color:#ae81ff}.dark .chroma .il{color:#ae81ff}.dark .chroma .mo{color:#ae81ff}.dark .chroma .o{color:#f92672}.dark .chroma .ow{color:#f92672}.dark .chroma .p{}.dark .chroma .c{color:#75715e}.dark .chroma .ch{color:#75715e}.dark .chroma .cm{color:#75715e}.dark .chroma .c1{color:#75715e}.dark .chroma .cs{color:#75715e}.dark .chroma .cp{color:#75715e}.dark .chroma .cpf{color:#75715e}.dark .chroma .g{}.dark .chroma .gd{color:#f92672}.dark .chroma .ge{font-style:italic}.dark .chroma .gr{}.dark .chroma .gh{}.dark .chroma .gi{color:#a6e22e}.dark .chroma .go{}.dark .chroma .gp{}.dark .chroma .gs{font-weight:700}.dark .chroma .gu{color:#75715e}.dark .chroma .gt{}.dark .chroma .gl{}.dark .chroma .w{}</style><script>localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")</script><link rel=alternate type=application/rss+xml href=https://aakinshin.net/posts/index.xml title="RSS Feed"></head><body><nav><div class="container flex flex-wrap items-center justify-between mx-auto max-w-6xl h-12 px-6"><div class="flex items-center justify-start justify-self-start"><div class="flex nav-item h-12 w-12 items-center justify-center"><a class=text-white href=https://aakinshin.net/><svg class="fai w-6 h-6"><use xlink:href="/img/fa/all.svg#house-chimney"/></svg></a></div><div class="flex nav-item h-12 items-center"><a class="px-3 text-white" href=https://aakinshin.net/posts/>Posts</a></div><div class="flex nav-item h-12 items-center"><a class="px-3 text-white" href=https://aakinshin.net/about/>About</a></div></div><button id=theme-toggle type=button class="nav-item p-3 content-center justify-self-end"><svg id="theme-toggle-dark-icon" class="hidden w-6 h-6" fill="currentcolor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001.0 1010.586 10.586z"/></svg><svg id="theme-toggle-light-icon" class="hidden w-6 h-6" fill="currentcolor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1A1 1 0 119 4V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707A1 1 0 1113.536 5.05l.707-.707a1 1 0 011.414.0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707A1 1 0 004.343 5.757l.707.707zm1.414 8.486-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"/></svg></button></div></nav><div class="main container mx-auto max-w-6xl px-6"><div class=main-post><h1 class=blog-post-title id=post-title>Plain-text summary notation for multimodal distributions</h1><div class="flex flex-wrap justify-start items-center"><svg class="fai"><use xlink:href="/img/fa/all.svg#calendar-days"/></svg><time datetime=2020-11-17>November 17, 2020</time><svg class="fai ml-3"><use xlink:href="/img/fa/all.svg#tag"/></svg>
<a class=label-link href=https://aakinshin.net/tags/mathematics/>Mathematics</a>
<a class=label-link href=https://aakinshin.net/tags/statistics/>Statistics</a>
<a class=label-link href=https://aakinshin.net/tags/research/>Research</a>
<a class=label-link href=https://aakinshin.net/tags/multimodality/>Multimodality</a>
<a class=label-link href=https://aakinshin.net/tags/qrde/>QRDE</a>
<a class=label-link href=https://aakinshin.net/tags/harrell-davis-quantile-estimator/>Harrell-Davis quantile estimator</a>
<a class=label-link href=https://aakinshin.net/tags/outliers/>Outliers</a></div><br><div class=main-content><p>Let&rsquo;s say you collected a lot of data and want to explore the underlying distributions of collected samples.
If you have only a few distributions, the best way to do that is to look at the density plots
(expressed via histograms, kernel density estimations, or <a href=https://aakinshin.net/posts/qrde-hd/>quantile-respectful density estimations</a>).
However, it&rsquo;s not always possible.</p><p>Suppose you have to process dozens, hundreds, or even thousands of distributions.
In that case,
it may be extremely time-consuming to manually check visualizations of each distribution.
If you analyze distributions from the command line or send notifications about suspicious samples,
it may be impossible to embed images in the reports.
In these cases, there is a need to present a distribution using plain text.</p><p>One way to do that is plain text histograms.
Unfortunately, this kind of visualization may occupy o lot of space.
In complicated cases, you may need 20 or 30 lines per a single distribution.</p><p>Another way is to present classic <a href=https://en.wikipedia.org/wiki/Summary_statistics>summary statistics</a>
like mean or median, standard deviation or median absolute deviation, quantiles, skewness, and kurtosis.
There is another problem here:
without experience, it&rsquo;s hard to reconstruct the true distribution shape based on these values.
Even if you are an experienced researcher, the statistical metrics may become misleading in the case of multimodal distributions.
Multimodality is one of the most severe challenges in distribution analysis because it distorts basic summary statistics.
It&rsquo;s important to not only find such distribution but also have a way to present brief information about multimodality effects.</p><p>So, how can we condense the underlying distribution shape of a given sample to a short text line?
I didn&rsquo;t manage to find an approach that works fine in my cases, so I came up with my own notation.
Most of the interpretation problems in my experiments arise from multimodality and outliers,
so I decided to focus on these two things and specifically highlight them.
Let&rsquo;s consider this plot:</p><div class="flex my-7 justify-center"><a class="img-light hidden" href=/posts/modality-summary-notation/img/thumbnail-light.svg target=_blank alt=thumbnail><img src=/posts/modality-summary-notation/img/thumbnail-light.svg width=800></a>
<a class="img-dark hidden" href=/posts/modality-summary-notation/img/thumbnail-dark.svg target=_blank alt=thumbnail><img src=/posts/modality-summary-notation/img/thumbnail-dark.svg width=800></a></div><p>I suggest describing it like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>1.00, 2.00<span class=o>}</span> + <span class=o>[</span>7.16<span class=p>;</span> 13.12<span class=o>]</span>_100 + <span class=o>{</span>19.00<span class=o>}</span> + <span class=o>[</span>27.69<span class=p>;</span> 32.34<span class=o>]</span>_100 + <span class=o>{</span>37.00..39.00<span class=o>}</span>_3
</span></span></code></pre></div><p>Let me explain the suggested notation in detail.</p><h3 id=getting-summary-numbers>Getting summary numbers</h3><p>I explained how to find modes and outliers in previous blog posts:</p><ul><li><a href=https://aakinshin.net/posts/lowland-multimodality-detection/>&ldquo;Lowland multimodality detection&rdquo;</a> explains how to find the exact number of modes and their locations based on the given sample</li><li><a href=https://aakinshin.net/posts/intermodal-outliers/>&ldquo;Intermodal outliers&rdquo;</a> explains how to find mode ranges and detect intermodal outliers together with the global lower and upper outliers</li></ul><p>Once we finished the calculations, we get a series of subsets of the given samples like this:</p><ul><li>Lower outliers</li><li>Mode range #1</li><li>Intermodal outliers</li><li>Mode range #2</li><li>Intermodal outliers</li><li>&mldr;</li><li>Intermodal outliers</li><li>Mode range #N</li><li>Upper outliers</li></ul><p>In the case of the unimodal distribution, we have only three subsets:</p><ul><li>Lower outliers</li><li>Mode range</li><li>Upper outliers</li></ul><p>Note that some of the outlier subsets may be empty.
Meanwhile, mode ranges are always non-empty.</p><h3 id=mode-ranges>Mode ranges</h3><p>On the first step of the distribution exploration, we are often most interested in the range of values.
So, we can present a mode range as an interval from the minimum to the maximum sample element inside the mode range:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>7.16<span class=p>;</span> 13.12<span class=o>]</span>
</span></span></code></pre></div><p>If we want more details, we may also want to know the central tendency.
In the case of a single mode, the most reasonable metric is the mode location itself.
We can present it between the minimum and the maximum values:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>7.16 <span class=p>|</span> 10.03 <span class=p>|</span> 13.12<span class=o>]</span>
</span></span></code></pre></div><p>The next thing that is also good to know is accuracy.
Unfortunately, it&rsquo;s hard to find a good metric that describes the accuracy of all three numbers at the same time.
Even if we focus only on the mode value, we can try to introduce a confidence interval for the mode value,
but it will be hard to present it in an easily interpreted form without a long legend.
Since we describe the raw sample, it makes sense to present the number of elements in the range.
It provides a basic idea of accuracy.
For example, if a range contains only 5 elements, we can assume that the presented values are rough and untrustable.
If a range contains 10000 elements, we can assume that the presented values are pretty accurate.
If we are interested in more sophisticated metrics, we can always check them later.
However, the raw number of elements in the range is usually enough on the first step of exploration.
We can add this number as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>7.16<span class=p>;</span> 13.12<span class=o>]</span>_100
</span></span><span class=line><span class=cl><span class=o>[</span>7.16 <span class=p>|</span> 10.03 <span class=p>|</span> 13.12<span class=o>]</span>_100
</span></span></code></pre></div><h3 id=outlier-ranges>Outlier ranges</h3><p>When we have no more than two outliers, we can present them as a set:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>1.00<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>{</span>1.00, 2.00<span class=o>}</span>
</span></span></code></pre></div><p>If the number of outliers is more than two, we can skip the middle outliers using <code>..</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>1.00..3.00<span class=o>}</span>
</span></span></code></pre></div><p>Thus, we get the value of the minimum and maximum outlier in the given group.
We can also show the number of outliers in this group as we did for mode ranges:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>1.00..3.00<span class=o>}</span>_5
</span></span></code></pre></div><p>The outlier and mode ranges are easy to distinguish because they use different symbols
(<code>{A..B}</code> for outliers and <code>[A; B]</code> for modes).</p><h3 id=range-combination>Range combination</h3><p>Once we presented the mode ranges and the outliers group, we can just concatenate them using the <code>+</code> sign:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>1.00, 2.00<span class=o>}</span> + <span class=o>[</span>7.16<span class=p>;</span> 13.12<span class=o>]</span>_100 + <span class=o>{</span>19.00<span class=o>}</span> + <span class=o>[</span>27.69<span class=p>;</span> 32.34<span class=o>]</span>_100 + <span class=o>{</span>37.00..39.00<span class=o>}</span>_3
</span></span></code></pre></div><p>This notation can be interpreted as follows:</p><ul><li><em>Lower outliers</em>: <code>{1.00, 2.00}</code> (two elements)</li><li><em>Mode #1</em>: <code>[7.16; 13.12]_100</code> (100 elements between 7.16 and 13.12)</li><li><em>Intermodal outliers</em>: <code>{19.00}</code> (one element)</li><li><em>Mode #2</em>: <code>[27.69; 32.34]_100</code> (100 elements between 27.69 and 32.34)</li><li><em>Upper outliers</em>: <code>{37.00..39.00}_3</code> (three elements)</li></ul><h3 id=compaction-vs-detailing>Compaction vs. detailing</h3><p>This notation aims to provide the most important information about the distribution in a very short way.
Some optional details like the number of elements in the ranges and the mode location may be useful for a unimodal distribution:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>3.12<span class=o>}</span> + <span class=o>[</span>12.56 <span class=p>|</span> 15.91 <span class=p>|</span> 25.03<span class=o>]</span>_100 + <span class=o>{</span>74.92..82.31<span class=o>}</span>_5
</span></span></code></pre></div><p>However, if we describe a bimodal distribution, such detailing may be quite long:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>1.00, 2.00<span class=o>}</span> + <span class=o>[</span>7.16 <span class=p>|</span> 10.02 <span class=p>|</span> 13.12<span class=o>]</span>_100 + <span class=o>{</span>19.00<span class=o>}</span> + <span class=o>[</span>27.69 <span class=p>|</span> 29.92 <span class=p>|</span> 32.34<span class=o>]</span>_100 + <span class=o>{</span>37.00..39.00<span class=o>}</span>_3
</span></span></code></pre></div><p>In this case, the mode location can be omitted since it&rsquo;s not so useful on the first step of exploration.
Mode ranges are much more important.
Thus, we can remove this value and make the notation shorter.
Optionally, the number of elements can be also omitted:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>1.00, 2.00<span class=o>}</span> + <span class=o>[</span>7.16<span class=p>;</span> 13.12<span class=o>]</span> + <span class=o>{</span>19.00<span class=o>}</span> + <span class=o>[</span>27.69<span class=p>;</span> 32.34<span class=o>]</span> + <span class=o>{</span>37.00..39.00<span class=o>}</span>
</span></span></code></pre></div><p>In this case, we still keep the most important high-level information about modality and outliers.</p><p>However, if we describe a distribution with many modes, the notation may become long again:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>1.00, 2.00<span class=o>}</span> + <span class=o>[</span>7.16<span class=p>;</span> 13.12<span class=o>]</span> + <span class=o>{</span>19.00<span class=o>}</span> + <span class=o>[</span>27.69<span class=p>;</span> 32.34<span class=o>]</span> + <span class=o>{</span>37.00..39.00<span class=o>}</span> +
</span></span><span class=line><span class=cl>               <span class=o>[</span>47.12<span class=p>;</span> 52.41<span class=o>]</span> + <span class=o>{</span>61.00<span class=o>}</span> + <span class=o>[</span>66.91<span class=p>;</span> 73.12<span class=o>]</span> + <span class=o>{</span>78.00, 79.00<span class=o>}</span>
</span></span></code></pre></div><p>In this case, we are not interested in the exact range of each node.
For the brief overview, it would be enough to get the idea of the overall range and the number of modes.
So, we can omit the middle nodes like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>1.00, 2.00<span class=o>}</span> + <span class=o>[</span>7.16<span class=p>;</span> 13.12<span class=o>]</span> + &lt;<span class=m>2</span> modes&gt; + <span class=o>[</span>66.91<span class=p>;</span> 73.12<span class=o>]</span> + <span class=o>{</span>78.00, 79.00<span class=o>}</span>
</span></span></code></pre></div><p>Using these tricks, we can always compact this notation to a form of the reasonable size
that highlights the most important information for the first look exploration.</p><h3 id=missing-metrics>Missing metrics</h3><p>The suggested notation doesn&rsquo;t contain some of the metrics usually included in such a kind of summaries.
Below you can find my reasoning that shows why I excluded some common metrics.</p><ul><li><strong>Global median</strong><br>In the multimodal case, the global median value without a density plot
may be misleading when it&rsquo;s located between modes.<div class="flex my-7 justify-center"><a class="img-light hidden" href=/posts/modality-summary-notation/img/median1-light.svg target=_blank alt=median1><img src=/posts/modality-summary-notation/img/median1-light.svg width=800></a>
<a class="img-dark hidden" href=/posts/modality-summary-notation/img/median1-dark.svg target=_blank alt=median1><img src=/posts/modality-summary-notation/img/median1-dark.svg width=800></a></div></li><li><strong>Mode range median</strong><br>The median often leads to a wrong impression about the skewness.
Based on my experience, when people see a combination of a range and a central tendency,
they imagine the central tendency matches the mode.
It&rsquo;s OK for symmetric distributions, but it may be misleading for skewed distributions.<div class="flex my-7 justify-center"><a class="img-light hidden" href=/posts/modality-summary-notation/img/median2-light.svg target=_blank alt=median2><img src=/posts/modality-summary-notation/img/median2-light.svg width=800></a>
<a class="img-dark hidden" href=/posts/modality-summary-notation/img/median2-dark.svg target=_blank alt=median2><img src=/posts/modality-summary-notation/img/median2-dark.svg width=800></a></div></li><li><strong>Skewness</strong><br>The raw value of skewness may be useful for an experienced researcher,
but it useless for most people.
Meanwhile, the range with the mode value allows imagining the mode shape without special skills.<div class="flex my-7 justify-center"><a class="img-light hidden" href=/posts/modality-summary-notation/img/skewness-light.svg target=_blank alt=skewness><img src=/posts/modality-summary-notation/img/skewness-light.svg width=800></a>
<a class="img-dark hidden" href=/posts/modality-summary-notation/img/skewness-dark.svg target=_blank alt=skewness><img src=/posts/modality-summary-notation/img/skewness-dark.svg width=800></a></div></li><li><strong>Quartiles</strong><br>The first and third quartiles are an essential part of the <a href=https://en.wikipedia.org/wiki/Five-number_summary>five number summary</a>.
While it may be useful to see these values on the box plots,
it&rsquo;s not so useful in a plain text report.
In the five-number summary, we also have the minimum and the maximum value,
but they can be spoiled by outliers,
so Q1 and Q3 provide the value of the range that contains the middle 50% of elements in the given sample.
In our case, we already removed the outliers; it&rsquo;s enough to present just the mode ranges
(it plays the role of <a href=https://en.wikipedia.org/wiki/Credible_interval>highest density interval</a>).
The values of Q1 and Q3 will create visual noise, but they will not provide additional meaningful information
that helps to imagine a distribution on the first exploration step.<div class="flex my-7 justify-center"><a class="img-light hidden" href=/posts/modality-summary-notation/img/quartiles-light.svg target=_blank alt=quartiles><img src=/posts/modality-summary-notation/img/quartiles-light.svg width=800></a>
<a class="img-dark hidden" href=/posts/modality-summary-notation/img/quartiles-dark.svg target=_blank alt=quartiles><img src=/posts/modality-summary-notation/img/quartiles-dark.svg width=800></a></div></li><li><strong>Dispersion</strong><br>The measures of dispersion like
<a href=https://en.wikipedia.org/wiki/Standard_deviation>standard deviation</a> or
<a href=https://en.wikipedia.org/wiki/Median_absolute_deviation>median absolute deviation</a>
are very handy when we work with symmetric distributions.
Unfortunately, they may be misleading in the case of asymmetric distributions.
When we have a central tendency (e.g., mean, median, or mode) and a measure of dispersion,
we tend to reconstruct a range using a simple formula like <code>&lt;CentralTendency> ± k * &lt;Dispersion></code> where <code>k</code> is a random factor.
In this thought reconstruction, we always get a symmetric interval around the central tendency.
If we want to get an idea of asymmetry, we need two dispersion values: for the left and the right parts of the distribution.
Unfortunately, it makes the thought reconstruction even more challenging because we have more numbers to process.
Since we have the mode range, we already have an idea about the spread; we don&rsquo;t need an additional dispersion value.</li></ul><h3 id=reference-implementation>Reference implementation</h3><p>You can find a reference C# implementation of this algorithm in
the latest nightly version (0.3.0-nightly.59+) of <a href=https://github.com/AndreyAkinshin/perfolizer>perfolizer</a>
(see <code>LowlandModalityDetector</code>, <code>DoubleMadOutlierDetector</code>, <code>ManualModalityDataFormatter</code>).
Here is a code sample:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=c1>// Generate sample</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>random</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Random</span><span class=p>(</span><span class=m>42</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>data</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=kt>double</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>data</span><span class=p>.</span><span class=n>AddRange</span><span class=p>(</span><span class=k>new</span><span class=p>[]</span> <span class=p>{</span><span class=m>1.0</span><span class=p>,</span> <span class=m>2.0</span><span class=p>});</span> <span class=c1>// Lower outliers</span>
</span></span><span class=line><span class=cl><span class=n>data</span><span class=p>.</span><span class=n>AddRange</span><span class=p>(</span><span class=k>new</span> <span class=n>NormalDistribution</span><span class=p>(</span><span class=m>10</span><span class=p>,</span> <span class=m>1</span><span class=p>).</span><span class=n>Random</span><span class=p>(</span><span class=n>random</span><span class=p>).</span><span class=n>Next</span><span class=p>(</span><span class=m>100</span><span class=p>));</span> <span class=c1>// Mode #1</span>
</span></span><span class=line><span class=cl><span class=n>data</span><span class=p>.</span><span class=n>AddRange</span><span class=p>(</span><span class=k>new</span><span class=p>[]</span> <span class=p>{</span><span class=m>19.0</span><span class=p>});</span> <span class=c1>// Intermodal outliers</span>
</span></span><span class=line><span class=cl><span class=n>data</span><span class=p>.</span><span class=n>AddRange</span><span class=p>(</span><span class=k>new</span> <span class=n>NormalDistribution</span><span class=p>(</span><span class=m>30</span><span class=p>,</span> <span class=m>1</span><span class=p>).</span><span class=n>Random</span><span class=p>(</span><span class=n>random</span><span class=p>).</span><span class=n>Next</span><span class=p>(</span><span class=m>100</span><span class=p>));</span> <span class=c1>// Mode #2</span>
</span></span><span class=line><span class=cl><span class=n>data</span><span class=p>.</span><span class=n>AddRange</span><span class=p>(</span><span class=k>new</span><span class=p>[]</span> <span class=p>{</span><span class=m>37.0</span><span class=p>,</span> <span class=m>38.0</span><span class=p>,</span> <span class=m>39.0</span><span class=p>});</span> <span class=c1>// Upper outliers</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Find modes and outliers</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>modalityData</span> <span class=p>=</span> <span class=n>LowlandModalityDetector</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>DetectModes</span><span class=p>(</span><span class=n>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=n>AutomaticModalityDataFormatter</span><span class=p>.</span><span class=n>Instance</span><span class=p>.</span><span class=n>Format</span><span class=p>(</span><span class=n>modalityData</span><span class=p>));</span>
</span></span></code></pre></div><p>This prints the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=p>{</span><span class=m>1.00</span><span class=p>,</span> <span class=m>2.00</span><span class=p>}</span> <span class=p>+</span> <span class=p>[</span><span class=m>7.16</span><span class=p>;</span> <span class=m>13.12</span><span class=p>]</span><span class=n>_100</span> <span class=p>+</span> <span class=p>{</span><span class=m>19.00</span><span class=p>}</span> <span class=p>+</span> <span class=p>[</span><span class=m>27.69</span><span class=p>;</span> <span class=m>32.34</span><span class=p>]</span><span class=n>_100</span> <span class=p>+</span> <span class=p>{</span><span class=m>37.00</span><span class=p>..</span><span class=m>39.00</span><span class=p>}</span><span class=n>_3</span>
</span></span></code></pre></div><h3 id=conclusion>Conclusion</h3><p>In this post, I showed a notation that provides a summary of a multimodal distribution shape.
It uses the following concepts:</p><ul><li>The primary focus is on the mode and outlier ranges.</li><li>Optionally, we can show more details using the mode locations in the number of elements in each sample subset.</li><li>If we get too many numbers, we notation can be shortified by omitting optional data or middle modes.</li></ul><p>Of course, we can modify the set of signs (<code>{}[];..|+</code>),
but I believe that the above concepts satisfy the original goal
(present the essential parameters of a multimodal distribution in a short plain-text form).</p><p>Personally, I use this notation to process sets of performance measurements.
In performance analysis, multimodality may be a severe problem,
so I would like to be aware of multimodal distributions in my data sets.
I prefer getting a plain text summary in two primary use cases:</p><ul><li>Getting an overview of a multimodal distribution in terminal</li><li>Sending slack notifications about suspicious samples</li></ul><p>Once I get the idea of the distribution shape, I can go deeper and check out the density and timeline plots.
In most cases, I don&rsquo;t do that because I already have the most important information from the summary.</p><p>At the first few tries, it may be hard to quickly interpret this notation.
However, when you get used to it,
you will be able to instantly get the idea of the distribution shape using this short plain text description.</p><p>If you have any suggestions for improvements, feedback is welcome!</p></div><br><br><div class="flex flex-wrap justify-center items-center mb-5"><span>Share:</span><div class="text-4xl pl-3"><a href="https://www.reddit.com/submit?url=https%3a%2f%2faakinshin.net%2fposts%2fmodality-summary-notation%2f&title=Plain-text%20summary%20notation%20for%20multimodal%20distributions" target=_blank title="Share on Reddit"><svg class="fai fai-link"><use xlink:href="/img/fa/all.svg#reddit"/></svg></a></div><div class="text-4xl pl-3"><a href="https://twitter.com/intent/tweet?text=Plain-text%20summary%20notation%20for%20multimodal%20distributions&url=https%3a%2f%2faakinshin.net%2fposts%2fmodality-summary-notation%2f&via=andrey_akinshin&related=andrey_akinshin" rel=nofollow target=_blank title="Share on Twitter"><svg class="fai fai-link"><use xlink:href="/img/fa/all.svg#twitter"/></svg></a></div><div class="text-4xl pl-3"><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2faakinshin.net%2fposts%2fmodality-summary-notation%2f" target=_blank title="Share on HackerNews"><svg class="fai fai-link"><use xlink:href="/img/fa/all.svg#hacker-news"/></svg></a></div><div class="text-4xl pl-3"><a href="https://getpocket.com/save?url=https%3a%2f%2faakinshin.net%2fposts%2fmodality-summary-notation%2f&title=Plain-text%20summary%20notation%20for%20multimodal%20distributions" target=_blank title="Add to Pocket"><svg class="fai fai-link"><use xlink:href="/img/fa/all.svg#get-pocket"/></svg></a></div></div></div></div><script>var themeToggleDarkIcon=document.getElementById("theme-toggle-dark-icon"),themeToggleBtn,themeToggleLightIcon=document.getElementById("theme-toggle-light-icon");const imagesDark=document.querySelectorAll(".img-dark"),imagesLight=document.querySelectorAll(".img-light");localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(themeToggleLightIcon.classList.remove("hidden"),imagesDark.forEach(e=>{e.classList.remove("hidden")})):(themeToggleDarkIcon.classList.remove("hidden"),imagesLight.forEach(e=>{e.classList.remove("hidden")})),themeToggleBtn=document.getElementById("theme-toggle"),themeToggleBtn.addEventListener("click",function(){themeToggleDarkIcon.classList.toggle("hidden"),themeToggleLightIcon.classList.toggle("hidden"),imagesLight.forEach(e=>{e.classList.toggle("hidden")}),imagesDark.forEach(e=>{e.classList.toggle("hidden")}),localStorage.getItem("color-theme")?localStorage.getItem("color-theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark"))})</script><footer class="z-20 p-4 md:p-6 mt-3 w-full border-t border-gray-200 shadow flex items-center justify-center dark:border-gray-600 bg-white dark:bg-zinc-800"><span class="dark:text-gray-400 text-center">© 2013—2022 <span class=whitespace-nowrap>Andrey Akinshin</span></span><ul class="flex flex-wrap items-center px-4 mb-1"><li><a href=https://github.com/AndreyAkinshin><svg class="fai fai-link w-5 h-5"><title>GitHub</title><use xlink:href="/img/fa/all.svg#github"/></svg></a></li><li><a href=https://twitter.com/andrey_akinshin><svg class="fai fai-link w-5 h-5"><title>Twitter</title><use xlink:href="/img/fa/all.svg#twitter"/></svg></a></li><li><a href=https://aakinshin.net/posts/index.xml><svg class="fai fai-link w-5 h-5"><title>RSS</title><use xlink:href="/img/fa/all.svg#rss"/></svg></a></li></ul><div class=main-content><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.1/anchor.min.js integrity="sha512-zPB79j2C+3sFS9zcA3vg/z6bVKzJVEyu9pY5w89akQRys76zpAT2t6S3wZKla3QQ14O5l/Yt0RUQ/DHXx82Y5g==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>anchors.options={placement:"left",icon:"§"},anchors.add("h1"),anchors.add("h2"),anchors.add("h3")</script><script>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"],ignoreHtmlClass:"tex2jax_ignore",processHtmlClass:"tex2jax_process"}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script></body></html>