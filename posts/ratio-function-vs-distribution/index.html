<!doctype html><html lang=en class=h-100><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.74.3"><meta name=author content="Andrey Akinshin"><link href=/img/favicon.ico rel=icon type=image/x-icon><meta name=keywords content="Statistics"><title>Ratio function vs. ratio distribution | Andrey Akinshin</title><meta name=description content="Let&amp;rsquo;s say we have two distributions \(X\) and \(Y\). In the previous post, we discussed how to express the &amp;ldquo;absolute difference&amp;rdquo; between ..."><meta name=twitter:site content="@andrey_akinshin"><meta name=twitter:creator content="@andrey_akinshin"><link href=/css/lumen-bootstrap.min.css theme=light rel=stylesheet type=text/css media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link href=/css/slate-bootstrap.min.css theme=dark rel=stylesheet type=text/css media="(prefers-color-scheme: dark)"><link href=/css/syntax-light.css theme=light rel=stylesheet type=text/css media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link href=/css/syntax-dark.css theme=dark rel=stylesheet type=text/css media="(prefers-color-scheme: dark)"><script src=https://aakinshin.net/js/theme-before.min.26d61b7027fe55e642f0001cef94cb75b567d721086492aab6b4e32d9ee7811d.js></script><script type=module src=https://aakinshin.net/js/dark-mode-toggle.min.882998740b9c4c24677576b997bde5a487246e2e3bd72128a0e922eaa59db029.mjs></script><link href=https://aakinshin.net/css/fontawesome-all.min.50da8736f05b35aac9691de67fe993cbe01b7d88fcf0cb682c3a8f39933fe4a3.css rel=stylesheet type=text/css media=all><link href=https://aakinshin.net/css/about.min.2a76db7cc14055b3bafacc363f453917ab54a818a7db2a0a9b2409c0f6bf07c5.css rel=stylesheet type=text/css media=all><link href=https://aakinshin.net/css/blog.min.ae812fc71daf5160d927febda5a991cee6c361345e3f685d3736931ed7537986.css rel=stylesheet type=text/css media=all><link rel=alternate type=application/rss+xml href=https://aakinshin.net/posts/index.xml title="RSS Feed"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZVB6MXSX32"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-ZVB6MXSX32');</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-41419012-5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-41419012-5');</script><script type=text/javascript>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");ym(28700916,"init",{clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src=https://mc.yandex.ru/watch/28700916 style=position:absolute;left:-9999px alt></div></noscript><script src=/js/jquery-3.3.1.slim.min.js></script></head><body><div class=bg-primary><div class="container bg-primary"><nav class="navbar navbar-expand-sm navbar-dark bg-primary"><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link id=nav-link-blog href=https://aakinshin.net/><i class="fas fa-home" title=Home style=color:#fff></i></a></li><li class=nav-item><a class=nav-link id=nav-link-posts href=https://aakinshin.net/posts/>Posts</a></li><li class=nav-item><a class=nav-link id=nav-link-about href=https://aakinshin.net/about/>About</a></li><li class=nav-item><a class=nav-link id=nav-link-pdnb href=https://aakinshin.net/prodotnetbenchmarking/>Pro .NET Benchmarking</a></li></ul><ul class="navbar-nav ml-auto"><li class=nav-item><dark-mode-toggle permanent=true></dark-mode-toggle></li></ul></nav></div></div><div class=container><main id=main><div class=blog-main><div class="blog-post table-sm"><h1 class=blog-post-title id=post-title>Ratio function vs. ratio distribution</h1><span class=blog-post-meta><div class=faicon><i class="far fa-calendar-alt"></i></div><time datetime=2021-12-14>December 14, 2021</time>
&nbsp;&nbsp;
<i class="fas fa-tag"></i>&nbsp;
<a href=https://aakinshin.net/tags/statistics/ class="badge badge-info">Statistics</a></span><br><br><p>Let&rsquo;s say we have two distributions <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>.
In the <a href=https://aakinshin.net/posts/shift-function-vs-distribution/>previous post</a>,
we discussed how to express the &ldquo;absolute difference&rdquo; between them
using the shift function and the shift distribution.
Now let&rsquo;s discuss how to express the &ldquo;relative difference&rdquo; between them.
This abstract term also could be expressed in various ways.
My favorite approach is to build the <a href=https://aakinshin.net/posts/shift-and-ratio-functions/>ratio function</a>.
In order to do this, for each quantile <span class="math inline">\(p\)</span>, we should calculate <span class="math inline">\(Q_Y(p)/Q_X(p)\)</span> where <span class="math inline">\(Q\)</span> is the quantile function.
However, some people prefer using the <a href=https://en.wikipedia.org/wiki/Ratio_distribution>ratio distribution</a> <span class="math inline">\(Y/X\)</span>.
While both approaches may provide similar results for narrow positive non-overlapping distributions,
they are not equivalent in the general case.
In this post, we briefly consider examples of both approaches.</p><h3 id=equal-standard-normal-distributions>Equal standard normal distributions</h3><p>Let&rsquo;s start with a simple case when both <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are the standard normal distributions:
<span class="math inline">\(X=Y=\mathcal{N}(0,1)\)</span>.
Since distributions are equal, they have equal quantile functions: <span class="math inline">\(Q_X=Q_Y\)</span>.
Thus <span class="math inline">\(Q_Y(p)/Q_X(p)\)</span> is <span class="math inline">\(1\)</span> for all <span class="math inline">\(p\)</span> values except <span class="math inline">\(p=0\)</span> (because <span class="math inline">\(Q_Y(0)=Q_X(0)=0\)</span>).
Here is the corresponding <a href=https://aakinshin.net/posts/shift-and-ratio-functions/>ratio function</a>:</p><div class=row><div class=mx-auto><a href=/posts/ratio-function-vs-distribution/img/ratio1-light.png target=_blank class=imgldlink alt=ratio1><picture>
<source theme=dark srcset=/posts/ratio-function-vs-distribution/img/ratio1-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/ratio-function-vs-distribution/img/ratio1-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/ratio-function-vs-distribution/img/ratio1-light.png></picture></a></div></div><br><p>Such a ratio function tells us that there is no difference between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>.
If we want to build the ratio function for samples, we should just estimate quantiles for both samples.
As a robust and statistically efficient quantile estimator we can use
<a href=https://aakinshin.net/posts/preprint-thdqe/>the trimmed Harrell-Davis quantile estimator</a> (see <a href=#Akinshin2021>[Akinshin2021]</a>).</p><p>We can also build the ratio distribution <span class="math inline">\(Y/X\)</span>.
It&rsquo;s well-known that the ratio of two standard normal distributions is
the <a href=https://en.wikipedia.org/wiki/Cauchy_distribution>Cauchy distribution</a>:</p><div class=row><div class=mx-auto><a href=/posts/ratio-function-vs-distribution/img/distr1-light.png target=_blank class=imgldlink alt=distr1><picture>
<source theme=dark srcset=/posts/ratio-function-vs-distribution/img/distr1-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/ratio-function-vs-distribution/img/distr1-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/ratio-function-vs-distribution/img/distr1-light.png></picture></a></div></div><br><p>Having the Cauchy distribution in your experiments could bring some trouble.
Firstly, this distribution has heavy tails, so that we could expect extremely high outliers.
Secondly, the variance of the Cauchy distribution is undefined so that
<a href=https://en.wikipedia.org/wiki/Central_limit_theorem>the Central limit theorem</a> could not be applied there.</p><h3 id=equal-standard-uniform-distributions>Equal standard uniform distributions</h3><p>Now let&rsquo;s build both plots for two standard uniform distributions:
<span class="math inline">\(X=Y=\mathcal{U}(0,1)\)</span>.
Obviously, the ratio function is defined as <span class="math inline">\(Q_Y(p)/Q_X(p)=1\)</span> for all <span class="math inline">\(p\)</span> values except <span class="math inline">\(p=0\)</span>:</p><div class=row><div class=mx-auto><a href=/posts/ratio-function-vs-distribution/img/ratio2-light.png target=_blank class=imgldlink alt=ratio2><picture>
<source theme=dark srcset=/posts/ratio-function-vs-distribution/img/ratio2-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/ratio-function-vs-distribution/img/ratio2-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/ratio-function-vs-distribution/img/ratio2-light.png></picture></a></div></div><br><p>The ratio of two uniform distributions <a href=https://stats.stackexchange.com/q/185683/261747>is defined as follows</a>:</p><p><span class="math display">\[f(x) = \begin{cases}
1/2, & \text{if } 0 \le x \le 1 \\
1/(2x^2), & \text{if } x > 1 \\ 
0, & \text{otherwise}.
\end{cases}
\]</span></p><p>Here is the corresponding plot:</p><div class=row><div class=mx-auto><a href=/posts/ratio-function-vs-distribution/img/distr2-light.png target=_blank class=imgldlink alt=distr2><picture>
<source theme=dark srcset=/posts/ratio-function-vs-distribution/img/distr2-dark.png media="(prefers-color-scheme: dark)"><source theme=light srcset=/posts/ratio-function-vs-distribution/img/distr2-light.png media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><img class="mx-auto d-block img-fluid" width=800 src=/posts/ratio-function-vs-distribution/img/distr2-light.png></picture></a></div></div><br><p>This picture describes the actual distribution of <span class="math inline">\(Y/X\)</span>, but it doesn&rsquo;t provide useful insights about
the actual difference between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>.</p><h3 id=conclusion>Conclusion</h3><p>Both the ratio function and the shift distribution may provide
useful insights about the properties of the difference between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>.
However, if we want to get a clear picture that shows the actual relative difference between distribution PDFs,
the ratio function works much better.</p><h3 id=references>References</h3><ul><li><b id=Akinshin2021>[Akinshin2021]</b><br>Andrey Akinshin (2021)
Trimmed Harrell-Davis quantile estimator based on the highest density interval of the given width,<br><a href=https://arxiv.org/abs/2111.11776>arXiv:2111.11776</a></li></ul><br><br><div class=row><div class="mx-auto share-block"><div class=share-title>Share:</div><div class=share-button><a href="https://www.reddit.com/submit?url=https%3a%2f%2faakinshin.net%2fposts%2fratio-function-vs-distribution%2f&title=Ratio%20function%20vs.%20ratio%20distribution" target=_blank title="Share on Reddit"><i class="fab fa-reddit fa-2x"></i></a></div><div class=share-button><a href="https://twitter.com/intent/tweet?text=Ratio%20function%20vs.%20ratio%20distribution&url=https%3a%2f%2faakinshin.net%2fposts%2fratio-function-vs-distribution%2f&via=andrey_akinshin&related=andrey_akinshin" rel=nofollow target=_blank title="Share on Twitter"><i class="fab fa-twitter fa-2x"></i></a></div><div class=share-button><a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2faakinshin.net%2fposts%2fratio-function-vs-distribution%2f" target=_blank title="Share on HackerNews"><i class="fab fa-hacker-news fa-2x"></i></a></div><div class=share-button><a href="https://facebook.com/sharer.php?u=https%3a%2f%2faakinshin.net%2fposts%2fratio-function-vs-distribution%2f" rel=nofollow target=_blank title="Share on Facebook"><i class="fab fa-facebook fa-2x"></i></a></div><div class=share-button><a href="http://vk.com/share.php?url=https%3a%2f%2faakinshin.net%2fposts%2fratio-function-vs-distribution%2f" target=_blank title="Share on VKontakte"><i class="fab fa-vk fa-2x"></i></a></div><div class=share-button><a href="https://getpocket.com/save?url=https%3a%2f%2faakinshin.net%2fposts%2fratio-function-vs-distribution%2f&title=Ratio%20function%20vs.%20ratio%20distribution" target=_blank title="Add to Pocket"><i class="fab fa-get-pocket fa-2x"></i></a></div></div></div></div><hr></div></div></main></div><footer class=blog-footer><div class=container><p>&copy; 2013–2021 Andrey Akinshin
|
<a href=https://github.com/AndreyAkinshin><i class="fab fa-github" title=GitHub></i></a><a href=https://twitter.com/andrey_akinshin><i class="fab fa-twitter" title=Twitter></i></a><a href=https://aakinshin.net/posts/index.xml><i class="fas fa-rss" title=RSS></i></a>|
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a></p></div></footer><script src=https://aakinshin.net/js/theme-after.min.082780cb948cc57eabbc0d80172a7a5347d5572b599938b4c9876dfd7978b424.js></script><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/anchor.min.js></script><script src=https://aakinshin.net/js/custom.min.11932490dde776463ed165b345838c701accc0cfdedf2e0868f13415f41f0872.js></script><script>window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true,},options:{skipHtmlTags:['script','noscript','style','textarea','pre'],ignoreHtmlClass:'tex2jax_ignore',processHtmlClass:'tex2jax_process'}};</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></body></html>