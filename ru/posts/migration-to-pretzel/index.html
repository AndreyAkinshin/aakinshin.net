<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="Как я блог на кренделёк переводил">
    <meta name="author" content="Andrey Akinshin">
    <link href="/img/favicon.ico" rel="icon" type="image/x-icon"/>
    <meta name="keywords" content='Pretzel'>

    <title>Как я блог на кренделёк переводил</title>

    <!-- Bootstrap CSS -->
    <link href="/css/lumen-bootstrap.min.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/minty-bootstrap.min.css" rel="stylesheet" type="text/css" media="all" disabled>
    <link href="/css/sketchy-bootstrap.min.css" rel="stylesheet" type="text/css" media="all" disabled>
    <link href="/css/slate-bootstrap.min.css" rel="stylesheet" type="text/css" media="all" disabled>
    <link href="/css/solar-bootstrap.min.css" rel="stylesheet" type="text/css" media="all" disabled>
    <link href="/css/superhero-bootstrap.min.css" rel="stylesheet" type="text/css" media="all" disabled>

    <!-- Highlight.js -->
    <link href="/css/github-highlight.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/hopscotch-highlight.css" rel="stylesheet" type="text/css" media="all" disabled>
    <link href="/css/solarized-highlight.css" rel="stylesheet" type="text/css" media="all" disabled>
    <link href="/css/darcula-highlight.css" rel="stylesheet" type="text/css" media="all" disabled>

    <!-- FontAwesome -->
    <link href="/css/fontawesome-all.min.css" rel="stylesheet" type="text/css" media="all">

    <!-- Custom styles -->
    <link href="/css/about.css" rel="stylesheet" type="text/css" media="all">
    <link href="/css/blog.css" rel="stylesheet" type="text/css" media="all">

    <!-- Load theme -->
    <script src="/js/load-theme.js"></script>

    <!-- Feeds -->
    <link href="/ru/rss.xml" type="application/rss+xml" rel="alternate" title="Blog RSS Feed" />
    <link href="/ru/atom.xml" type="application/atom+xml" rel="alternate" title="Blog ATOM Feed" />

    <!-- Google analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41419012-5', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter28700916 = new Ya.Metrika({
                        id:28700916,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor:true,
                        trackHash:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/28700916" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

    <!-- jQuery -->
    <script src="/js/jquery-3.2.1.slim.min.js"></script>
  </head>

  <body>
    <div class="bg-primary">
      <div class="container bg-primary">
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" id="nav-link-blog" href="/ru/posts/">Блог</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="nav-link-blog-content" href="/ru/content/">Содержание</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="nav-link-about" href="/ru/about/">Об авторе</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="nav-link-about" href="https://www.apress.com/us/book/9781484249406">Pro .NET Benchmarking</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Ru</a>
              <div class="dropdown-menu">
                  <a class="dropdown-item" href='/posts/migration-to-pretzel/'>En</a>
              </div>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Тема</a>
              <div class="dropdown-menu">
                  <h6 class="dropdown-header" style="text-align: center">Светлая</h6>
                  <a class="dropdown-item" href="#" onclick="setTheme('lumen', 'github');">lumen</a>
                  <a class="dropdown-item" href="#" onclick="setTheme('sketchy', 'github');">sketchy</a>
                  <a class="dropdown-item" href="#" onclick="setTheme('minty', 'github');">minty</a>
                  <div class="dropdown-divider"></div>
                  <h6 class="dropdown-header" style="text-align: center">Тёмная</h6>
                  <a class="dropdown-item" href="#" onclick="setTheme('solar', 'solarized');">solar</a>
                  <a class="dropdown-item" href="#" onclick="setTheme('slate', 'darcula');">slate</a>
                  <a class="dropdown-item" href="#" onclick="setTheme('superhero', 'hopscotch');">superhero</a>
              </div>
            </li>
            <li class="nav-item"><a class="nav-link" href="https://github.com/AndreyAkinshin"><i class="fab fa-github" title="GitHub" style="color:white"></i></a></li>
            <li class="nav-item"><a class="nav-link" href="https://twitter.com/andrey_akinshin"><i class="fab fa-twitter" title="Twitter" style="color:white"></i></a></li>
            <li class="nav-item"><a class="nav-link" href="/ru/rss.xml"><i class="fas fa-rss" title="RSS" style="color:white"></i></a></li>
          </ul>
        </nav>
      </div>
    </div>

    <div class="container">
      <div class="blog-main">
<div class="blog-post">

<h2 class="blog-post-title" id="post-title">Как я блог на кренделёк переводил</h2>
<span class="blog-post-meta">
  <b>Дата:</b> 26 февраля 2015.
  <b>Теги:</b>
        <a href="/ru/tags/pretzel"><span class="badge badge-pill badge-info">Pretzel</span></a>
</span><br /><br />

<p>Наконец-то у меня дошли руки, и я сделал себе статический блог. Раньше я писал посты в <a href="http://aakinshin.blogspot.ru/">aakinshin.blogspot.ru</a> на Google Blogger aka blogspot, но много чего мне в нём не нравилось, отбивалось всё желание писать. Теперь всё работает через GitHub, писать посты можно в MarkDown, шаблоны делать через Razor, кастомизировать всё по своему вкусу. И мультиленг нормальный =). Под катом можно найти техническую информацию.</p>
<p class="center">
  <img src="/img/posts/notes/migration-to-pretzel/pretzel.png" height="100px" />
</p><!--more-->
<h2 id="blogspot">Что не так с Blogspot</h2>
<p>Чудо-блогодвижок от Google раздражал меня по многим причинам. Обозначу некоторые из них:</p>
<ul>
<li>Нет нормального редактора. Приходится верстать всё в HTML в примитивной форме без подсветки синтаксиса и валидаций.</li>
<li>Нет нормального предварительного просмотра. Google рендерит только картинку будущего поста, в которую даже потыкать нельзя. А временами ещё и подтягивает местоположение по ip и рендерит всё в местной локали: скажем, если пользоваться функцией просмотра из Израиля, то велика вероятность увидеть большое количество иврита и right-to-left-вёрстку.</li>
<li>Нет возможности кастомизировать URL-ы. Я перфекционист, и хочу, чтобы адреса постов формировались согласно моим представлениям об этом мире. Скажем, мне не нравится <code>.html</code> в конце адреса. Указание текущего года и месяца в адресе также считаю лишним. А ещё хочется раскладывать посты по категориям, которые также бы присутствовали в URL-е.</li>
<li>Нет возможности вести мультиленг-блог. Т. е., чтобы была возможность сделать русскую и английскую версию поста и легко между ними переключаться. Ну и, соответственно, чтобы были отдельные подверсии блога только с русскими и только английскими постами.</li>
<li>Нет удобных возможностей для редактирования шаблона. Наверное, если потратить приличное количество времени, то можно в тамошнем редакторе что-то хорошее сделать, но мои попытки обернулись провалом.</li>
<li>Нет возможности прикрутить любимый мною git, чтобы нормально работать с версиями.</li>
</ul>
<p>В общем, решил я сделать себе статический блог.</p>
<h2 id="jekyll">Jekyll</h2>
<p>Интернет подсказал мне, что многие крутые ребята ведут свои блоги на <a href="http://jekyllrb.com/">Jekyll</a>. Отличное решение, приведу понравившиеся мне возможности:</p>
<ul>
<li>Можно поднять блог через GitHub, прикрутить для отображения кастомный домен.</li>
<li>Можно отлаживать блог локально без доступа к интернету.</li>
<li>Можно писать посты в Markdown, а по мере надобности прибегать к HTML+CSS.</li>
<li>Можно самому сформировать всю нужную разметку шаблонов на <a href="https://github.com/Shopify/liquid/wiki">Liquid</a>.</li>
<li>Можно относительно легко импортировать старые посты из Blogger.</li>
<li>Можно прописывать все конфиги в YML.</li>
<li>Можно расширять функциональность движка собственными плагинами.</li>
</ul>
<p>В общем, всё было хорошо, ушли все проблемы, которые мне мешали жить во вселенной blogspot. Впрочем, возникли некоторые трудности:</p>
<ul>
<li>Из коробки было далеко не всё, что я хотел видеть в своём новом бложике. Пришлось писать плагины. Jekyll написан на Ruby. И плагины тоже нужно писать на Ruby. Пришлось на старости лет освоить новый язык. Мне даже понравилось, прикольный код получается. Но после написания нескольких плагинчиков пришло осознание, что мне далеко до такого уровня Ruby-мастерства, на котором я смогу сделать эти плагины нормально. Эх, вот можно было бы нужный функционал писать на C#, было бы счастье.</li>
<li>Liquid прикольный, но на нём далеко не всё делается настолько просто, настолько хотелось бы. Вот дали бы мне мой любимый Razor, жить было бы легче.</li>
</ul>
<p>И я понял, что мне в идеале нужен аналог Jekyll, но только на .NET-стеке.</p>
<h2 id="pretzel">Pretzel</h2>
<p>Ещё немного поиска в интернете — и я нашёл его! Отличный проект под названием <a href="https://github.com/Code52/pretzel">pretzel</a>. Совместим с Jekyll, можно писать функционал на C# и верстать шаблоны на Razor. Увы, проект немного сыроват, многие нужные штуки не работали. Пришлось чутка <a href="https://github.com/Code52/pretzel/commits/master?author=AndreyAkinshin">поконтрибьютить</a> в проект, чтобы мой Jekyll-блог на нём завёлся. Затем ушло какое-то время, чтобы сделать нормальный мультиленг и сверстать всё так, чтобы выглядело хотя бы более или менее вменяемо. С базовой частью я наконец-то справился, блог завёлся и опубликовался в интернете. Остался, правда, небольшой набор тикетов (например, пагинатор, странички для тегов и категорий, косяки в вёрстке и т. п.), но я надеюсь решить их в рабочем режиме. Главное — теперь есть удобный инструмент для написания постов. За последние месяцы у меня накопилось много интересных заметок, планирую оформить их в обозримом будущем в письменном виде. Надеюсь, моя писанина окажется полезной для других разработчиков.</p>

<!-- Share -->

Поделиться:
<a href="https://twitter.com/intent/tweet?text=Как я блог на кренделёк переводил&url=http://aakinshin.net/ru/posts/migration-to-pretzel/&via=andrey_akinshin&related=andrey_akinshin" rel="nofollow" target="_blank" title="Share on Twitter"><i class="fab fa-twitter fa-2x" title="Twitter"></i></a>
<a href="https://www.reddit.com/submit?url=http://aakinshin.net/ru/posts/migration-to-pretzel/" target="_blank" title="Share on Reddit"><i class="fab fa-reddit fa-2x"></i></a>
<a href="https://news.ycombinator.com/submitlink?u=http://aakinshin.net/ru/posts/migration-to-pretzel/" target="_blank" title="Share on HackerNews"><i class="fab fa-hacker-news fa-2x"></i></a>
<a href="https://facebook.com/sharer.php?u=http://aakinshin.net/ru/posts/migration-to-pretzel/" rel="nofollow" target="_blank" title="Share on Facebook"><i class="fab fa-facebook fa-2x"></i></a>
<a href="https://plus.google.com/share?url=http://aakinshin.net/ru/posts/migration-to-pretzel/" rel="nofollow" target="_blank" title="Share on Google+"><i class="fab fab fa-google-plus-g fa-2x"></i></a>
<a href="http://vk.com/share.php?url=http://aakinshin.net/ru/posts/migration-to-pretzel/" target="_blank" title="Share on VKontakte"><i class="fab fa-vk fa-2x"></i></a>
<a href="https://getpocket.com/save?url=http://aakinshin.net/ru/posts/migration-to-pretzel/&title=Как я блог на кренделёк переводил" target="_blank" title="Add to Pocket"><i class="fab fa-get-pocket fa-2x"></i></a>
<hr />

<!-- GitHub -->
<div>
  Исходный код поста находится на GitHub:<br />
  <a href="https://github.com/AndreyAkinshin/aakinshin.net/blob/master/web/_posts/ru/2015/migration-to-pretzel.md">https://github.com/AndreyAkinshin/aakinshin.net/blob/master/web/_posts/ru/2015/migration-to-pretzel.md</a>
</div>

</div>
</div>
    </div>

    <footer class="blog-footer bg-light">
      <div class="container">
        <p>&copy; 2013–2019 Андрей Акиньшин</p>
      </div>
    </footer>

    <!-- jQuery first (header), then popper, then Bootstrap JS. -->
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <!-- Other scripts -->
    <script src="/js/highlight.pack.js"></script>
    <script src="/js/anchor.min.js"></script>
    <script src="/js/custom.js"></script>
  </body>
</html>
