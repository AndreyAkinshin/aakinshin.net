<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>fonts on Андрей Акиньшин</title><link>https://aakinshin.net/ru/tags/fonts/</link><description>Recent content in fonts on Андрей Акиньшин</description><generator>Hugo -- gohugo.io</generator><language>ru</language><lastBuildDate>Mon, 03 Jun 2013 00:00:00 +0000</lastBuildDate><atom:link href="https://aakinshin.net/ru/tags/fonts/index.xml" rel="self" type="application/rss+xml"/><item><title>Занимательное о шрифтах в .NET</title><link>https://aakinshin.net/ru/posts/dotnet-fonts/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/dotnet-fonts/</guid><description>&lt;p>Сегодня мы поговорим о замечательном классе &lt;a href="http://msdn.microsoft.com/en-us/library/system.drawing.font(v=vs.90).aspx">Font&lt;/a>. Иногда при работе с шрифтами возникают некоторые вопросы, которые не настолько очевидны, как хотелось бы. Рассмотрим несколько из них.&lt;/p>
&lt;hr />
&lt;p>&lt;strong>Q:&lt;/strong> Как опознать моноширинный шрифт?&lt;/p>
&lt;p>&lt;strong>A:&lt;/strong> Это не такой простой вопрос. Если немного погуглить, то можно найти следующий совет: описываем у себя в проекте класс &lt;a href="http://www.pinvoke.net/default.aspx/Structures/LOGFONT.html">LOGFONT&lt;/a> и используем метод &lt;a href="http://msdn.microsoft.com/en-us/library/9a240xh2.aspx">ToLogFont&lt;/a> для конвертации шрифта в соответствующий объект. После этого (согласно легенде) в поле &lt;a href="http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.uidlglogfont.lfpitchandfamily(v=vs.80).aspx">lfPitchAndFamily&lt;/a> первый бит должен определять моноширинность шрифта. Так вот, это враньё, в современном мире поле &lt;a href="http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/1bc0166b-8a68-4067-a44b-e11ff7d55720">всегда будет равно нулю&lt;/a>. Когда-то где-то этот способ работал, но сейчас не работает. В реальности приходится использовать не очень красивое, но весьма эффективное решение типа такого:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// graphics — заранее созданный экземпляр класса Graphics&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">IsMonospace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Font&lt;/span> &lt;span class="n">font&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">graphics&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MeasureString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;iii&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">font&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Width&lt;/span> &lt;span class="p">-&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">graphics&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MeasureString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;WWW&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">font&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="m">1e-3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>