<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>R on Андрей Акиньшин</title><link>https://aakinshin.net/ru/tags/r/</link><description>Recent content in R on Андрей Акиньшин</description><generator>Hugo -- gohugo.io</generator><language>ru</language><lastBuildDate>Fri, 11 Jul 2014 00:00:00 +0000</lastBuildDate><atom:link href="https://aakinshin.net/ru/tags/r/index.xml" rel="self" type="application/rss+xml"/><item><title>Раскрашиваем R в терминале: пакет colorout</title><link>https://aakinshin.net/ru/posts/r-colorout/</link><pubDate>Fri, 11 Jul 2014 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-colorout/</guid><description>&lt;p>В последнее время мне часто приходится гонять R-скрипты на удалённом Linux-сервере. Большую часть работы я выполняю на домашней машине, но иногда приходится отлаживать скрипты прямо на сервере. В этом мне очень помогает пакет &lt;strong>colorout&lt;/strong>, который умеет красиво раскрашивать R в терминале. Давайте взглянем на него чуть подробнее.&lt;/p>
&lt;p class="center">
 &lt;img src="https://aakinshin.net/img/posts/r/colorout/screen1.png" />
&lt;/p></description></item><item><title>Cairo — делаем графики гладкими</title><link>https://aakinshin.net/ru/posts/r-cairo/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-cairo/</guid><description>R обладает богатейшим функционалом по формированию различных графиков. К сожалению, иногда графики получается не настолько красивыми, как бы нам хотелось. Давайте нарисуем график синуса:
x &amp;lt;- seq(0, 10, by = 0.1) y &amp;lt;- sin(x) plot(x, y, type=&amp;#34;l&amp;#34;) Если вы хорошо вглядитесь в это изображение, то увидите, что функция получилась не совсем гладкой. Дело в том, что стандартное графическое устройство не поддерживает anti-aliasing. Но не стоит грустить! Нам поможет Cairo! Cairo — это программная библиотека, предназначенная для рендеринга векторной графики с не зависящим от оборудования API. А для языка R есть одноимённый пакет. Вы можете почитать документацию к этому пакету, но пока что мы посмотрим работу на примере. Для начала установим пакет и подключим его:
install.packages(&amp;#34;Cairo&amp;#34;) library(&amp;#34;Cairo&amp;#34;) Допустим, я работаю под операционной системой Windows и хочу просто посмотреть на гладкий график функции. Нет ничего проще:
CairoWin() plot(x, y, type=&amp;#34;l&amp;#34;) А теперь давайте ещё раз нарисуем наш график, но результат получим в виде png-файла:
CairoPNG(&amp;#34;sin.png&amp;#34;) plot(x, y, type=&amp;#34;l&amp;#34;) dev.off() # Завершаем формирование файла В Cairo-функциях можно указывать множество дополнительных параметров, таких как ширина и высота изображения, тип файла, его качество, цвет фона и многое другое. Конечно, для рабочего процесса Cairo не так уж и нужен, но при формировании отчётов о проделанной работе он поможет сделать ваши графики более привлекательными.</description></item><item><title>Progress bar в R</title><link>https://aakinshin.net/ru/posts/r-progress-bar/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-progress-bar/</guid><description>&lt;p>Давайте поговорим о долгих расчётах, ведь они не так редко встречаются в мире вычислений. Когда вы запускаете скрипт, который будет заведомо долго работать, то приятно смотреть на состояние прогресса. Эта информация поможет прикинуть время до конца вычислений (&lt;em>«осталось ещё 30%, я успею выпить чашку кофе»&lt;/em>
) или просигнализировать о бесконечном цикле (&lt;i>&lt;em>1438% выполнено, что-то пошло не так&amp;hellip;&lt;/em>&lt;/i>
). Давайте научим наш скрипт сообщать пользователю о проценте выполненных работ.&lt;/p></description></item><item><title>R-ссылки</title><link>https://aakinshin.net/ru/posts/r-links/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-links/</guid><description>&lt;h3 id="английские-полезные-r-ресурсы">Английские полезные R-ресурсы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://www.r-project.org/">R-project&lt;/a> — официальный сайт&lt;/li>
&lt;li>&lt;a href="http://cran.r-project.org/">CRAN&lt;/a> — официальный репозиторий пакетов&lt;/li>
&lt;li>&lt;a href="http://www.bioconductor.org/">Bioconductor&lt;/a> — ещё один репозиторий пакетов&lt;/li>
&lt;li>&lt;a href="http://gallery.r-enthusiasts.com/">R graph gallery&lt;/a> — графическая галерея R&lt;/li>
&lt;li>&lt;a href="http://www.inside-r.org/">Inside-R&lt;/a> — замечательно R-сообщество&lt;/li>
&lt;li>&lt;a href="http://lib.stat.cmu.edu/R/CRAN/doc/manuals/fullrefman.pdf">Full manual&lt;/a> — полные оригинальные спецификации&lt;/li>
&lt;li>&lt;a href="http://www.cookbook-r.com/">R Cookbook&lt;/a> — разные полезные R-сниппеты для решения типовых задач&lt;/li>
&lt;li>&lt;a href="http://www.statmethods.net/index.html">Quick-R&lt;/a> — краткий обзор языка&lt;/li>
&lt;li>&lt;a href="http://tryr.codeschool.com/">Try R&lt;/a> — online-обучалка основам языка&lt;/li>
&lt;li>&lt;a href="http://rwiki.sciviews.org/doku.php">R Wiki&lt;/a> — небольшая вики про язык R&lt;/li>
&lt;li>&lt;a href="http://www.rseek.org/">R Seek&lt;/a> — поиск информации про R&lt;/li>
&lt;li>&lt;a href="http://journal.r-project.org/">R Journal&lt;/a> — журнал про R&lt;/li>
&lt;li>&lt;a href="https://google.github.io/styleguide/Rguide.xml">Google&amp;rsquo;s R Style Guide&lt;/a> — стандарты оформления R-кода от Google&lt;/li>
&lt;li>&lt;a href="http://www.mayin.org/ajayshah/KB/R/index.html">R by example&lt;/a> — подборка примеров использования R&lt;/li>
&lt;li>&lt;a href="http://cran.r-project.org/doc/FAQ/R-FAQ.html">R FAQ&lt;/a> — официальный FAQ&lt;/li>
&lt;li>&lt;a href="https://github.com/hadley/devtools/wiki/Functional-programming">Functional programming&lt;/a> — учимся функциональному программированию на R&lt;/li>
&lt;li>&lt;a href="http://crantastic.org/">crantastic&lt;/a> — ещё одно R-сообщество&lt;/li>
&lt;li>&lt;a href="http://www.omegahat.org/">omegahat&lt;/a> — ещё один R-репозиторий&lt;/li>
&lt;li>&lt;a href="http://www.programmingr.com">ProgrammingR.com&lt;/a> — и ещё один полезный сайт&lt;/li>
&lt;li>&lt;a href="http://fractalswithr.blogspot.ru/">fractalswithr&lt;/a> — фракталы на R&lt;/li>
&lt;/ul>
&lt;p> &lt;/p></description></item><item><title>Rprofile — кастомизируем рабочее окружение</title><link>https://aakinshin.net/ru/posts/r-rprofile/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-rprofile/</guid><description>&lt;p>Давайте поговорим о задании окружения в R. Для этой цели имеется два волшебных файла:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Rprofile.site&lt;/code> — глобальный файл настроек для всех сессий. Путь в Windows: &lt;code>c:\Program Files\R\R-x.y.z\etc\Rprofile.site&lt;/code>, путь в Linux: &lt;code>/etc/R/Rprofile.site&lt;/code>.&lt;/li>
&lt;li>&lt;code>.Rprofile&lt;/code> — локальный файл настроек для текущей сессии. Лежит в домашней директории пользователя.&lt;/li>
&lt;/ul>
&lt;p>Эти файлы строятся единообразно, в них можно задать глобальные настройки окружения и объявить две полезных функции:&lt;/p>
&lt;ul>
&lt;li>&lt;code>.First &amp;lt;- function() { ... }&lt;/code> — функция, которая запускается в начале R-сессии&lt;/li>
&lt;li>&lt;code>.Last &amp;lt;- function() { ... }&lt;/code> — функция, которая запускается в конце R-сессии&lt;/li>
&lt;/ul>
&lt;p>На Stackoverflow &lt;a href="http://stackoverflow.com/questions/1189759/expert-r-users-whats-in-your-rprofile">можно посмотреть&lt;/a> какие .Rprofile-файлы используют люди. Взглянем, что же можно полезного сделать в таком файле на небольших примерах.&lt;/p></description></item><item><title>Вызов R-скрипта с аргументами из консоли</title><link>https://aakinshin.net/ru/posts/r-terminal-arguments/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-terminal-arguments/</guid><description>&lt;p>Для выполнения R-скрипта из консоли нам понадобится помощь утилит &lt;code>Rscript.exe&lt;/code> и &lt;code>Rterm.exe&lt;/code>. Разница между ними состоит в том, что &lt;code>Rscript.exe&lt;/code>
в результате выполнения выдаст нам только результат работы R-скрипта, а &lt;code>Rterm.exe&lt;/code> выдаст полный лог R-сессии (включая стартовое приглашение к работе и все исполняемые команды). Если быть до конца честными, то &lt;code>Rscript.exe&lt;/code> по сути вызывает &lt;code>Rterm.exe&lt;/code> с специальными аргументами (об этом немного ниже). Рассмотрим пример запуска скрипта с аргументами командной строки:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Rterm.exe&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">restore&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">save&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">args&lt;/span> &lt;span class="m">100&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">script.R&lt;/span> &lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">output.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Rscript.exe&lt;/span> &lt;span class="n">script.R&lt;/span> &lt;span class="m">100&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">output.txt&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Разберём эти команды чуть подробней.&lt;/p></description></item><item><title>Конкатенация строк в R</title><link>https://aakinshin.net/ru/posts/r-string-concatenation/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-string-concatenation/</guid><description>&lt;p>Давайте поговорим о конкатенации строк. Новички в R пытаются пробовать стандартную конструкцию&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="line">&lt;span class="cl">&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Но их постигает неудача — R так не работает. Оператор плюс — это &lt;a href="http://stat.ethz.ch/R-manual/R-patched/library/base/html/Arithmetic.html">арифметическая операция&lt;/a>, её нельзя применять к строкам. В R полагается использовать функцию &lt;a href="http://stat.ethz.ch/R-manual/R-patched/library/base/html/paste.html">paste&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">paste &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sep&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">collapse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">paste0&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">collapse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Множественное присваивание в R</title><link>https://aakinshin.net/ru/posts/r-multiple-assignment/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-multiple-assignment/</guid><description>&lt;p>R — мощный и лаконичный язык. С помощью коротких инструкций можно сделать очень многое. Но давайте сделаем R ещё лаконичнее.&lt;/p>
&lt;p>Чего мне всегда не хватало в R — так это множественного присваивания. Из-за отсутствия этой возможности приходится иногда писать не совсем красивый код для получения результата функции, который должен распределиться по нескольким переменным:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="line">&lt;span class="cl">&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">solve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">matrix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">ncol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x1&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">x[1]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x2&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">x[2]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>А вот было бы здорово если бы такие вещи можно было записывать в одну строчку, например так:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="line">&lt;span class="cl">с&lt;span class="p">(&lt;/span>&lt;span class="n">x1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%=%&lt;/span> &lt;span class="nf">solve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">matrix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">ncol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Нет ничего проще!&lt;/p></description></item><item><title>Операторы +=, -= в R</title><link>https://aakinshin.net/ru/posts/r-compound-assignment/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-compound-assignment/</guid><description>&lt;p>Продолжаем писать полезные операторы для языка R. В большинстве современных языков есть операторы +=, -= и т.п., они делают синтаксис более лаконичным. А давайте и в R определим подобные операторы, чтобы вместо&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="line">&lt;span class="cl">&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">y&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>мы могли бы писать:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="line">&lt;span class="cl">&lt;span class="n">x&lt;/span> &lt;span class="o">%+=%&lt;/span> &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">y&lt;/span> &lt;span class="o">%-=%&lt;/span> &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Рисуем комиксы в стиле xkcd</title><link>https://aakinshin.net/ru/posts/r-xkcd/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-xkcd/</guid><description>&lt;p>Многие слышали о таком замечательном комиксе, как &lt;a href="http://www.xkcd.com/">xkcd&lt;/a>. Это веб-комикс от &lt;a href="http://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D0%BD%D1%80%D0%BE,_%D0%A0%D1%8D%D0%BD%D0%B4%D0%B5%D0%BB">Рэндела Манро&lt;/a> о романтике, сарказме, математике и языке. Для некоторых комиксов есть
&lt;a href="https://xkcd.ru/">переводы на русский&lt;/a>. Для поиска и просмотра ваших любимых комиксов в R есть отдельный пакет:
&lt;a href="http://cran.r-project.org/web/packages/RXKCD/index.html">RXKCD&lt;/a>. Давайте установим этот пакет и подключим его:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;RXKCD&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;RXKCD&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Давайте поищем какой-нибудь комикс, а затем нарисуем его. Функция &lt;i>searchXKCD&lt;/i>
выдаст нам список всех комиксов, в описании которых встречается заданная фраза. А &lt;i>getXKCD&lt;/i>
выдаст нам полную информацию о комиксе по заданному номеру (включая рисование картинки).&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">searchXKCD&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;someone is wrong&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">getXKCD&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">386&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p class="center">
 &lt;img src="https://aakinshin.net/img/posts/r/xkcd/screen1.png" />
&lt;/p>
&lt;p>А теперь помимо стандартных комиксов научимся рисовать свои!&lt;/p></description></item><item><title>Функции в R</title><link>https://aakinshin.net/ru/posts/r-functions/</link><pubDate>Mon, 03 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/r-functions/</guid><description>&lt;p>В R очень много разных полезных функций. И многие большие вещи можно сделать весьма быстро, написав очень мало кода. На официальном сайте есть замечательная шпаргалка на английском языке: &lt;a href="http://cran.r-project.org/doc/contrib/Short-refcard.pdf">R reference card&lt;/a>. В сети есть несколько вольных урезанных переводов, но они не очень удобные. Ниже вашему вниманию представляется русифицированная модифицированная версия обзора основных функций R. Команды снабжены ссылками на &lt;a href="http://stat.ethz.ch/R-manual/">online-мануал&lt;/a>.&lt;/p></description></item></channel></rss>