<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Structures on Андрей Акиньшин</title><link>https://aakinshin.net/ru/tags/structures/</link><description>Recent content in Structures on Андрей Акиньшин</description><generator>Hugo -- gohugo.io</generator><language>ru</language><lastBuildDate>Thu, 06 Jun 2013 00:00:00 +0000</lastBuildDate><atom:link href="https://aakinshin.net/ru/tags/structures/index.xml" rel="self" type="application/rss+xml"/><item><title>Использование изменяемых структур в свойствах классов</title><link>https://aakinshin.net/ru/posts/mutable-structures-as-property/</link><pubDate>Thu, 06 Jun 2013 00:00:00 +0000</pubDate><guid>https://aakinshin.net/ru/posts/mutable-structures-as-property/</guid><description>&lt;div style="text-align: right;">&lt;i>Названия всех классов вымышленные,&lt;br />все совпадения абсолютно случайны.&lt;/i>&lt;/div>
&lt;p>Занимался я как-то раз улучшением кода проекта. И наткнулся вот на такие строчки:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Rectangle&lt;/span> &lt;span class="n">Bounds&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;em>«Ай-яй-яй! Публичное поле в классе, как же нехорошо-то! Нужно срочно превратить его в свойство!»&lt;/em> — подумал я. И превратил:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Rectangle&lt;/span> &lt;span class="n">Bounds&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Сделал я такое невинное изменение и сразу пошёл дальше рефакторить — ведь ещё такое количество кода нуждалось в улучшении! Ну а в конце решил я запустить на всякий случай Unit-тесты. Какого же было моё удивление, когда половина тестов упала. &lt;em>«Да как же так! Ведь я особо-то ничего и не менял!»&lt;/em> Ну, поехали разбираться.&lt;/p></description></item></channel></rss>